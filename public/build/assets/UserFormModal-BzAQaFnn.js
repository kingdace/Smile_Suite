import{v as F,r as E,j as e}from"./app-0NEBy9BJ.js";import{I as o}from"./InputError-Bp8hzlLn.js";import{I as n}from"./InputLabel-no62oqEe.js";import{T as m}from"./TextInput-Bzudihvk.js";import{X as U}from"./x-BmcQdfAq.js";import{S as f}from"./save-CeEkwxMK.js";import{P as g}from"./plus-CLctK3R5.js";import{U as b}from"./user-DGn9BjnL.js";import{M as j}from"./mail-Mj5Y8BMV.js";import{S as v}from"./shield-Dwr4YKLO.js";import{B as w}from"./building-2-DkFw8SPs.js";import{L as u}from"./lock-V4la6Teo.js";import"./createLucideIcon-CXdhGpw2.js";function O({open:x,onClose:d,onSuccess:c,user:r,clinics:N,mode:y="add"}){const s=y==="edit"&&r,{data:l,setData:t,post:C,put:_,errors:i,processing:p,reset:k}=F({name:s?r.name:"",email:s?r.email:"",password:"",password_confirmation:"",role:s?r.role:"staff",clinic_id:s&&r.clinic_id||""}),h=l.role!=="admin";E.useEffect(()=>{x?t({name:s?r.name:"",email:s?r.email:"",password:"",password_confirmation:"",role:s?r.role:"staff",clinic_id:s&&r.clinic_id||""}):k()},[x,r]);const S=a=>{a.preventDefault(),s?_(route("admin.users.update",r.id),{onSuccess:()=>{c&&c(),d()}}):C(route("admin.users.store"),{onSuccess:()=>{c&&c(),d()}})};return x?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm sm:max-w-md relative animate-fade-in border border-gray-200/50 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 text-white relative",children:[e.jsx("button",{onClick:d,className:"absolute top-3 right-3 text-white/80 hover:text-white transition-colors duration-200 focus:outline-none","aria-label":"Close",type:"button",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:s?e.jsx(f,{className:"w-4 h-4 text-white"}):e.jsx(g,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s?"Edit User":"Add User"}),e.jsx("p",{className:"text-blue-100 text-xs",children:s?"Update user details":"Create new account"})]})]})]}),e.jsxs("form",{onSubmit:S,className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(b,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx(n,{htmlFor:"name",value:"Full Name",className:"text-xs font-semibold text-gray-700"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"name",className:"w-full pl-8 pr-3 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",value:l.name,onChange:a=>t("name",a.target.value),required:!0,isFocused:!0,placeholder:"Enter full name"}),e.jsx(b,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]}),e.jsx(o,{className:"mt-1",message:i.name})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(j,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx(n,{htmlFor:"email",value:"Email Address",className:"text-xs font-semibold text-gray-700"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"email",type:"email",className:"w-full pl-8 pr-3 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",value:l.email,onChange:a=>t("email",a.target.value),required:!0,placeholder:"Enter email address"}),e.jsx(j,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]}),e.jsx(o,{className:"mt-1",message:i.email})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(v,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx(n,{htmlFor:"role",value:"User Role",className:"text-xs font-semibold text-gray-700"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"role",className:"w-full pl-8 pr-8 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 appearance-none text-sm",value:l.role,onChange:a=>{t("role",a.target.value),a.target.value==="admin"&&t("clinic_id","")},required:!0,children:[e.jsx("option",{value:"staff",children:"Staff Member"}),e.jsx("option",{value:"dentist",children:"Dentist"}),e.jsx("option",{value:"clinic_admin",children:"Clinic Admin"}),e.jsx("option",{value:"admin",children:"System Admin"})]}),e.jsx(v,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}),e.jsx("div",{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx(o,{className:"mt-1",message:i.role})]}),h&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(w,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx(n,{htmlFor:"clinic_id",value:"Assigned Clinic",className:"text-xs font-semibold text-gray-700"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"clinic_id",className:"w-full pl-8 pr-8 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 appearance-none text-sm",value:l.clinic_id,onChange:a=>t("clinic_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a clinic"}),N.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(w,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"}),e.jsx("div",{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx(o,{className:"mt-1",message:i.clinic_id})]}),!h&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:[e.jsx("strong",{children:"System Admin:"})," This user will have system-wide access and is not associated with any specific clinic."]})})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(u,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:s?"Update Password (Optional)":"Set Password"})]}),e.jsxs("div",{className:"space-y-1.5 mb-2",children:[e.jsx(n,{htmlFor:"password",value:s?"New Password":"Password",className:"text-xs font-medium text-gray-600"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password",type:"password",className:"w-full pl-8 pr-3 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",value:l.password,onChange:a=>t("password",a.target.value),required:!s,placeholder:s?"Leave blank to keep current":"Enter password"}),e.jsx(u,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]}),e.jsx(o,{className:"mt-1",message:i.password})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"password_confirmation",value:s?"Confirm New Password":"Confirm Password",className:"text-xs font-medium text-gray-600"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password_confirmation",type:"password",className:"w-full pl-8 pr-3 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",value:l.password_confirmation,onChange:a=>t("password_confirmation",a.target.value),required:!s,placeholder:"Confirm password"}),e.jsx(u,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]}),e.jsx(o,{className:"mt-1",message:i.password_confirmation})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3",children:[e.jsx("button",{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-1.5 text-sm",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3.5 h-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s?"Saving...":"Adding..."]}):e.jsxs(e.Fragment,{children:[s?e.jsx(f,{className:"w-3.5 h-3.5"}):e.jsx(g,{className:"w-3.5 h-3.5"}),s?"Save Changes":"Add User"]})}),e.jsx("button",{type:"button",className:"px-4 py-2.5 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all duration-200 font-medium text-sm",onClick:d,children:"Cancel"})]})]})]})}):null}export{O as default};
