import{r as y,j as e,$ as ue,Y as C}from"./app-BWxQYrX6.js";import{A as xe}from"./AuthenticatedLayout-qAPAn_x5.js";import{C as k,c as _,a as ge,b as fe}from"./card-CsaC10C3.js";import{B as f}from"./button-CPcSBPFh.js";import{B as F}from"./badge-D2HCse-l.js";import{A as je}from"./arrow-left-BNGReqYb.js";import{t as D,c as p,n as z,s as V,g as ye,f as b,b as A}from"./format-CYZdy3_o.js";import{C as be}from"./chevron-left-CPm7DngP.js";import{C as Ne}from"./chevron-right-B6CR-LxY.js";import{C as ve}from"./calendar-days-CCedEM1a.js";import{c as we}from"./createLucideIcon-C-SF-e7E.js";import{P as G}from"./plus-DZ4KkTSa.js";import{S as pe}from"./search-CecFmK67.js";import{F as Ce}from"./funnel-CQeXSy6H.js";import{C as J}from"./calendar-D24UCPWo.js";import{C as De}from"./clock-Dg12Dfp2.js";import{U as Me}from"./user-oEMFmpBd.js";import{S as Se}from"./stethoscope-BePhj6bx.js";import{E as ke}from"./eye-D1o4inAJ.js";import{S as _e}from"./square-pen-CtBlYgPf.js";import"./index-BGZbWSET.js";import"./layout-dashboard-B7xWly84.js";import"./users-D28d9V-z.js";import"./scissors-Dqps4-NJ.js";import"./dollar-sign-JaFWOl8x.js";import"./shield-Du_-C_3t.js";import"./trending-up-CcwnyvAK.js";import"./circle-alert-C9uAGIcv.js";import"./loader-circle-C0rYjyGN.js";import"./SiteHeader-BIRnvd5N.js";import"./index-C8s1n2oo.js";import"./x-D5TWC7ZM.js";import"./crown-C_VyokGJ.js";import"./zap-B57EPhTQ.js";import"./circle-check-big-3-_3u0jr.js";import"./info-yq3WN-vu.js";import"./circle-x-Dfm_zbyn.js";import"./building-2-BAoYD3sH.js";import"./file-text-CdUJ8PC7.js";import"./triangle-alert-OBXn1-EQ.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ae=we("list",Fe);function Q(l,a,t){const n=D(l,t==null?void 0:t.in);return isNaN(a)?p(l,NaN):(a&&n.setDate(n.getDate()+a),n)}function X(l,a,t){const n=D(l,t==null?void 0:t.in);if(isNaN(a))return p(l,NaN);if(!a)return n;const i=n.getDate(),o=p(l,n.getTime());o.setMonth(n.getMonth()+a+1,0);const d=o.getDate();return i>=d?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function Le(l){return p(l,Date.now())}function O(l,a,t){const[n,i]=z(t==null?void 0:t.in,l,a);return+V(n)==+V(i)}function Oe(l,a){const t=D(l,a==null?void 0:a.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function ze(l,a){const[t,n]=z(l,a.start,a.end);return{start:t,end:n}}function K(l,a){const{start:t,end:n}=ze(a==null?void 0:a.in,l);let i=+t>+n;const o=i?+t:+n,d=i?n:t;d.setHours(0,0,0,0);let N=1;const m=[];for(;+d<=o;)m.push(p(t,d)),d.setDate(d.getDate()+N),d.setHours(0,0,0,0);return i?m.reverse():m}function Te(l,a){const t=D(l,a==null?void 0:a.in);return t.setDate(1),t.setHours(0,0,0,0),t}function L(l,a){var N,m;const t=ye(),n=t.weekStartsOn??((m=(N=t.locale)==null?void 0:N.options)==null?void 0:m.weekStartsOn)??0,i=D(l,a==null?void 0:a.in),o=i.getDay(),d=(o<n?-7:0)+6-(o-n);return i.setDate(i.getDate()+d),i.setHours(23,59,59,999),i}function $e(l,a,t){const[n,i]=z(t==null?void 0:t.in,l,a);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function Ee(l,a){return O(p(l,l),Le(l))}function Be(l,a,t){return Q(l,-7,t)}function Ye(l,a,t){return X(l,-1,t)}function Mt({auth:l,clinic:a,appointments:t,filters:n}){var W,P;const[i,o]=y.useState(new Date),[d,N]=y.useState("month"),[m,T]=y.useState(null),[Z,ee]=y.useState((t==null?void 0:t.data)||[]),[v,$]=y.useState((n==null?void 0:n.search)||""),[M,E]=y.useState((n==null?void 0:n.status)||""),[S,B]=y.useState((n==null?void 0:n.dentist)||""),te=[...new Set((W=t==null?void 0:t.data)==null?void 0:W.map(s=>{var r;return(r=s.assigned_dentist)==null?void 0:r.id}).filter(Boolean))],se=[...new Set((P=t==null?void 0:t.data)==null?void 0:P.map(s=>{var r;return(r=s.status)==null?void 0:r.name}).filter(Boolean))],re=s=>({Pending:"bg-yellow-100 text-yellow-800 border-yellow-300",Confirmed:"bg-blue-100 text-blue-800 border-blue-300",Completed:"bg-green-100 text-green-800 border-green-300",Cancelled:"bg-red-100 text-red-800 border-red-300","No Show":"bg-gray-100 text-gray-800 border-gray-300"})[s]||"bg-gray-100 text-gray-800 border-gray-300",ae=s=>({"Walk-in":"bg-purple-100 text-purple-800 border-purple-300","Phone Call":"bg-indigo-100 text-indigo-800 border-indigo-300","Online Booking":"bg-cyan-100 text-cyan-800 border-cyan-300","Follow-up":"bg-orange-100 text-orange-800 border-orange-300",Emergency:"bg-red-100 text-red-800 border-red-300"})[s]||"bg-gray-100 text-gray-800 border-gray-300";y.useEffect(()=>{let s=(t==null?void 0:t.data)||[];v&&(s=s.filter(r=>{var c,h,u,x,j,w,g;return((h=(c=r.patient)==null?void 0:c.first_name)==null?void 0:h.toLowerCase().includes(v.toLowerCase()))||((x=(u=r.patient)==null?void 0:u.last_name)==null?void 0:x.toLowerCase().includes(v.toLowerCase()))||((w=(j=r.patient)==null?void 0:j.email)==null?void 0:w.toLowerCase().includes(v.toLowerCase()))||((g=r.reason)==null?void 0:g.toLowerCase().includes(v.toLowerCase()))})),M&&(s=s.filter(r=>{var c;return((c=r.status)==null?void 0:c.name)===M})),S&&(s=s.filter(r=>{var c;return((c=r.assigned_dentist)==null?void 0:c.id)===parseInt(S)})),ee(s)},[t,v,M,S]);const Y=s=>Z.filter(r=>O(new Date(r.scheduled_at),s)),ne=()=>{if(d==="month"){const s=Te(i),r=Oe(i),c=A(s),h=L(r);return K({start:c,end:h})}else{const s=A(i),r=L(i);return K({start:s,end:r})}},le=s=>{o(r=>s==="next"?X(r,1):Ye(r))},ie=s=>{o(r=>s==="next"?Q(r,7):Be(r))},H=s=>{d==="month"?le(s):ie(s)},ce=()=>{o(new Date),T(new Date)},de=()=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:d==="month"?b(i,"MMMM yyyy"):`${b(A(i),"MMM d")} - ${b(L(i),"MMM d, yyyy")}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>H("prev"),children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(f,{variant:"outline",size:"sm",onClick:ce,children:"Today"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>H("next"),children:e.jsx(Ne,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(f,{variant:d==="month"?"default":"outline",size:"sm",onClick:()=>N("month"),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Month"]}),e.jsxs(f,{variant:d==="week"?"default":"outline",size:"sm",onClick:()=>N("week"),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Week"]})]}),e.jsx(C,{href:route("clinic.appointments.create-simplified",a.id),children:e.jsxs(f,{children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"New Appointment"]})})]})]}),oe=()=>e.jsx(k,{className:"mb-6",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search appointments...",value:v,onChange:s=>$(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:M,onChange:s=>E(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),se.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:S,onChange:s=>B(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Dentists"}),te.map(s=>{var c,h;const r=(h=(c=t==null?void 0:t.data)==null?void 0:c.find(u=>{var x;return((x=u.assigned_dentist)==null?void 0:x.id)===s}))==null?void 0:h.assigned_dentist;return r?e.jsx("option",{value:s,children:r.name},s):null})]}),e.jsxs(f,{variant:"outline",onClick:()=>{$(""),E(""),B("")},children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})})}),me=()=>{const s=ne(),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsx(k,{children:e.jsxs(_,{className:"p-0",children:[e.jsx("div",{className:"grid grid-cols-7 border-b",children:r.map(c=>e.jsx("div",{className:"p-4 text-center font-semibold text-gray-600 bg-gray-50",children:c},c))}),e.jsx("div",{className:"grid grid-cols-7",children:s.map((c,h)=>{const u=Y(c),x=d==="month"?$e(c,i):!0,j=Ee(c),w=m&&O(c,m);return e.jsxs("div",{className:`min-h-[120px] p-2 border-r border-b cursor-pointer transition-colors ${x?"bg-white hover:bg-gray-50":"bg-gray-50 text-gray-400"} ${j?"bg-blue-50":""} ${w?"bg-blue-100":""}`,onClick:()=>T(c),children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${j?"text-blue-600":""}`,children:b(c,"d")}),e.jsxs("div",{className:"space-y-1",children:[u.slice(0,3).map(g=>{var I,R,q,U;return e.jsxs("div",{className:"text-xs p-1 rounded bg-blue-100 text-blue-800 truncate",title:`${(I=g.patient)==null?void 0:I.first_name} ${(R=g.patient)==null?void 0:R.last_name} - ${b(new Date(g.scheduled_at),"h:mm a")}`,children:[e.jsxs("div",{className:"font-medium truncate",children:[(q=g.patient)==null?void 0:q.first_name," ",(U=g.patient)==null?void 0:U.last_name]}),e.jsx("div",{className:"text-blue-600",children:b(new Date(g.scheduled_at),"h:mm a")})]},g.id)}),u.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",u.length-3," ","more"]})]})]},h)})})]})})},he=()=>{if(!m)return null;const s=Y(m);return e.jsxs(k,{className:"mt-6",children:[e.jsx(ge,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Appointments for"," ",b(m,"EEEE, MMMM d, yyyy"),e.jsxs(F,{variant:"secondary",children:[s.length," appointment(s)"]})]})}),e.jsx(_,{children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No appointments scheduled for this date"}),e.jsx(C,{href:route("clinic.appointments.create-simplified",a.id),children:e.jsxs(f,{className:"mt-4",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Schedule Appointment"]})})]}):e.jsx("div",{className:"space-y-4",children:s.map(r=>{var c,h,u,x,j,w;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:b(new Date(r.scheduled_at),"h:mm a")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[(c=r.patient)==null?void 0:c.first_name," ",(h=r.patient)==null?void 0:h.last_name]})]}),r.assigned_dentist&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:r.assigned_dentist.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:re((u=r.status)==null?void 0:u.name),children:(x=r.status)==null?void 0:x.name}),e.jsx(F,{className:ae((j=r.type)==null?void 0:j.name),children:(w=r.type)==null?void 0:w.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{href:route("clinic.appointments.show",[a.id,r.id]),children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"h-4 w-4"})})}),e.jsx(C,{href:route("clinic.appointments.edit",[a.id,r.id]),children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(_e,{className:"h-4 w-4"})})})]})]})]},r.id)})})})]})};return e.jsxs(xe,{auth:l,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Appointment Calendar"}),children:[e.jsx(ue,{title:"Appointment Calendar"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(C,{href:route("clinic.appointments.index",a.id),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md",children:[e.jsx(je,{className:"h-4 w-4"}),"Back to List View"]})})}),de(),oe(),me(),he()]})})]})}export{Mt as default};
