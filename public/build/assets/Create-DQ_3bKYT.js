import{r as $,v as z,j as e,$ as H}from"./app-BWxQYrX6.js";import{A as K}from"./AuthenticatedLayout-qAPAn_x5.js";import{B as u}from"./button-CPcSBPFh.js";import{I as m}from"./input--euKJla3.js";import{L as l}from"./label-BqJOMct_.js";import{S as D,a as T,b as A,c as q,d as F}from"./select-BXZOfes3.js";import{T as O}from"./textarea-um13KWzU.js";import{C as p,a as b,b as j,c as y}from"./card-CsaC10C3.js";import{S as M}from"./separator-B2dAkJuh.js";import{S as X}from"./shopping-cart-B-23xUHM.js";import{A as G}from"./arrow-left-BNGReqYb.js";import{F as J}from"./file-text-CdUJ8PC7.js";import{C as o}from"./circle-alert-C9uAGIcv.js";import{P}from"./scissors-Dqps4-NJ.js";import{P as W}from"./plus-DZ4KkTSa.js";import{T as Y}from"./trash-2-DEAVWFvp.js";import{D as Z}from"./dollar-sign-JaFWOl8x.js";import{S as ee}from"./save-Cd4hnW0r.js";import{X as se}from"./x-D5TWC7ZM.js";import{C as f}from"./circle-check-big-3-_3u0jr.js";import"./index-BGZbWSET.js";import"./layout-dashboard-B7xWly84.js";import"./createLucideIcon-C-SF-e7E.js";import"./users-D28d9V-z.js";import"./calendar-D24UCPWo.js";import"./clock-Dg12Dfp2.js";import"./stethoscope-BePhj6bx.js";import"./chevron-right-B6CR-LxY.js";import"./shield-Du_-C_3t.js";import"./trending-up-CcwnyvAK.js";import"./loader-circle-C0rYjyGN.js";import"./SiteHeader-BIRnvd5N.js";import"./index-C8s1n2oo.js";import"./user-oEMFmpBd.js";import"./crown-C_VyokGJ.js";import"./zap-B57EPhTQ.js";import"./info-yq3WN-vu.js";import"./circle-x-Dfm_zbyn.js";import"./building-2-BAoYD3sH.js";import"./triangle-alert-OBXn1-EQ.js";import"./index-CmIe2631.js";import"./index-BPDCYA0y.js";import"./index-C0CE8RNb.js";function He({auth:B,clinic:E,suppliers:Q,inventoryItems:N}){const[d,v]=$.useState([{inventory_id:"",quantity_ordered:"",unit_cost:"",expected_delivery_date:"",notes:""}]),{data:x,setData:i,post:U,processing:w,errors:t}=z({supplier_id:"",order_date:new Date().toISOString().split("T")[0],expected_delivery_date:"",notes:"",delivery_notes:"",payment_terms:"",items:d}),L=()=>{v([...d,{inventory_id:"",quantity_ordered:"",unit_cost:"",expected_delivery_date:"",notes:""}])},R=s=>{if(d.length>1){const r=d.filter((c,n)=>n!==s);v(r),i("items",r)}},h=(s,r,c)=>{const n=[...d];n[s][r]=c,v(n),i("items",n)},g=s=>N.find(r=>r.id.toString()===s),_=s=>{const r=parseFloat(s.quantity_ordered)||0,c=parseFloat(s.unit_cost)||0;return r*c},C=()=>d.reduce((s,r)=>s+_(r),0),V=s=>{s.preventDefault(),U(route("clinic.purchase-orders.store",[E.id]))},S=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs(K,{auth:B,children:[e.jsx(H,{title:"Create Purchase Order"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-blue-150 to-cyan-100 rounded-t-lg mx-0 pt-4 shadow-2xl border border-blue-200/50 border-t border-t-blue-200",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 mx-5 mb-5 rounded-xl shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-white/5 rounded-full translate-y-10 -translate-x-10"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-white/3 rounded-full -translate-y-8 -translate-x-8"}),e.jsx("div",{className:"relative px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/25 rounded-2xl backdrop-blur-sm border border-white/40 shadow-lg",children:e.jsx(X,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Create Purchase Order"}),e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Create a new purchase order for inventory items"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(u,{variant:"outline",onClick:()=>window.history.back(),className:"gap-2 text-sm px-4 py-2 rounded-xl transition-all duration-300 border backdrop-blur-sm bg-white/20 border-white/30 text-white hover:bg-white/30",children:[e.jsx(G,{className:"h-4 w-4"}),"Back"]})})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 -mt--10 pb-12",children:e.jsx("form",{onSubmit:V,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(p,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(b,{className:"bg-gradient-to-r from-gray-50 via-blue-50/30 to-indigo-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xl font-bold text-gray-900",children:"Purchase Order Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Basic information for the purchase order"})]})]})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"supplier_id",className:"text-sm font-medium text-gray-700",children:"Supplier *"}),e.jsxs(D,{value:x.supplier_id,onValueChange:s=>i("supplier_id",s),children:[e.jsx(T,{className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",children:e.jsx(A,{placeholder:"Select supplier"})}),e.jsx(q,{children:Q.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]}),t.supplier_id&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.supplier_id]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"order_date",className:"text-sm font-medium text-gray-700",children:"Order Date *"}),e.jsx(m,{id:"order_date",type:"date",value:x.order_date,onChange:s=>i("order_date",s.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",required:!0}),t.order_date&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.order_date]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"expected_delivery_date",className:"text-sm font-medium text-gray-700",children:"Expected Delivery Date *"}),e.jsx(m,{id:"expected_delivery_date",type:"date",value:x.expected_delivery_date,onChange:s=>i("expected_delivery_date",s.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",required:!0}),t.expected_delivery_date&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.expected_delivery_date]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"payment_terms",className:"text-sm font-medium text-gray-700",children:"Payment Terms"}),e.jsx(m,{id:"payment_terms",type:"text",value:x.payment_terms,onChange:s=>i("payment_terms",s.target.value),placeholder:"e.g., Net 30, COD",className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"}),t.payment_terms&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.payment_terms]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"notes",className:"text-sm font-medium text-gray-700",children:"Notes"}),e.jsx(O,{id:"notes",value:x.notes,onChange:s=>i("notes",s.target.value),placeholder:"Additional notes for the purchase order...",className:"mt-1 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",rows:3}),t.notes&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.notes]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"delivery_notes",className:"text-sm font-medium text-gray-700",children:"Delivery Notes"}),e.jsx(O,{id:"delivery_notes",value:x.delivery_notes,onChange:s=>i("delivery_notes",s.target.value),placeholder:"Special delivery instructions...",className:"mt-1 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",rows:3}),t.delivery_notes&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.delivery_notes]})]})]})})]}),e.jsxs(p,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(b,{className:"bg-gradient-to-r from-gray-50 via-blue-50/30 to-indigo-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(P,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xl font-bold text-gray-900",children:"Order Items"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add items to the purchase order"})]})]}),e.jsxs(u,{type:"button",onClick:L,className:"gap-2 bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded-lg",children:[e.jsx(W,{className:"h-4 w-4"}),"Add Item"]})]})}),e.jsxs(y,{className:"p-6",children:[e.jsx("div",{className:"space-y-6",children:d.map((s,r)=>{var c,n,k,I;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Item ",r+1]}),d.length>1&&e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>R(r),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Y,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Item *"}),e.jsxs(D,{value:s.inventory_id,onValueChange:a=>h(r,"inventory_id",a),children:[e.jsx(T,{className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",children:e.jsx(A,{placeholder:"Select item"})}),e.jsx(q,{children:N.map(a=>e.jsx(F,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Quantity *"}),e.jsx(m,{type:"number",min:"1",value:s.quantity_ordered,onChange:a=>h(r,"quantity_ordered",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Unit Cost *"}),e.jsx(m,{type:"number",min:"0",step:"0.01",value:s.unit_cost,onChange:a=>h(r,"unit_cost",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Total"}),e.jsx("div",{className:"mt-1 h-11 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg flex items-center",children:e.jsx("span",{className:"font-semibold text-gray-900",children:S(_(s))})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Expected Delivery Date"}),e.jsx(m,{type:"date",value:s.expected_delivery_date,onChange:a=>h(r,"expected_delivery_date",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-700",children:"Notes"}),e.jsx(m,{type:"text",value:s.notes,onChange:a=>h(r,"notes",a.target.value),placeholder:"Item-specific notes...",className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]})]}),s.inventory_id&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Item Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((c=g(s.inventory_id))==null?void 0:c.quantity)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Min. Quantity:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((n=g(s.inventory_id))==null?void 0:n.minimum_quantity)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((k=g(s.inventory_id))==null?void 0:k.category)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"SKU:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((I=g(s.inventory_id))==null?void 0:I.sku)||"N/A"})]})]})]})]},r)})}),t.items&&e.jsxs("div",{className:"text-red-500 text-sm mt-4 flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),t.items]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30 sticky top-6",children:[e.jsx(b,{className:"bg-gradient-to-r from-gray-50 via-blue-50/30 to-indigo-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Z,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xl font-bold text-gray-900",children:"Order Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review your purchase order"})]})]})}),e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Items:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d.filter(s=>s.inventory_id).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d.reduce((s,r)=>s+(parseInt(r.quantity_ordered)||0),0)})]}),e.jsx(M,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:S(C())})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(u,{type:"submit",disabled:w||C()===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium",children:w?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating PO..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Create Purchase Order"]})}),e.jsxs(u,{type:"button",variant:"outline",onClick:()=>window.history.back(),className:"w-full py-3 rounded-lg",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]}),e.jsxs(p,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(b,{className:"bg-gradient-to-r from-gray-50 via-yellow-50/30 to-amber-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"h-4 w-4 text-white"})}),e.jsx("div",{children:e.jsx(j,{className:"text-lg font-bold text-gray-900",children:"Quick Tips"})})]})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Select a supplier to start creating your PO"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Add multiple items to your purchase order"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Review item details and current stock levels"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Set expected delivery dates for each item"})]})]})})]})]})]})})})]})]})}export{He as default};
