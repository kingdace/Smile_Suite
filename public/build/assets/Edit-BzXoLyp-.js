import{r as w,v as K,j as e,$ as M}from"./app-BytpB0TX.js";import{A as X}from"./AuthenticatedLayout-Br1RgKPG.js";import{B as p}from"./button-CtZjCLMA.js";import{I as x}from"./input-b_mCR-wU.js";import{L as i}from"./label-BHkS7Oac.js";import{S as P,a as A,b as F,c as E,d as U}from"./select-BzAtUc1W.js";import{T as B}from"./textarea-BkHvqQVB.js";import{C as j,a as y,b as v,c as f}from"./card-DvBlHsWB.js";import{B as G}from"./badge-Df2sRIfB.js";import{S as J}from"./separator-B73y2ybe.js";import{S as W}from"./square-pen-Gy5sVvcW.js";import{A as Y}from"./arrow-left-BHUmxfQt.js";import{F as Z}from"./file-text-w_JrWozr.js";import{C as c}from"./circle-alert-BxqCbx5A.js";import{P as L}from"./scissors-C29IvCgD.js";import{P as ee}from"./plus-Do73e_3H.js";import{T as se}from"./trash-2-DD_Y3zI6.js";import{D as te}from"./dollar-sign-CmdQIFbL.js";import{S as re}from"./save-D-sB17NR.js";import{X as ae}from"./x-DJBYx-Hm.js";import{C as N}from"./circle-check-big-CeOvxPJm.js";import"./ImageHelper-C4-MHkIR.js";import"./index-Bce1V77q.js";import"./layout-dashboard-ByTGW_ks.js";import"./createLucideIcon-C9b6KVSr.js";import"./users-aYUpDrTW.js";import"./calendar-P5cjB2ud.js";import"./clock-CUTjCDfl.js";import"./stethoscope-CCt4NXon.js";import"./chevron-right-oO7w1t3Q.js";import"./shield-D89UShmd.js";import"./trending-up-CRC8Tg-S.js";import"./loader-circle-CkDTXvo7.js";import"./SiteHeader-DkRsR5Bc.js";import"./index-nt-_yeOj.js";import"./user-DeoVP0od.js";import"./crown-CVYMErPk.js";import"./zap-BIRerbYh.js";import"./info-BnjbGvLN.js";import"./circle-x-CRU1fK1E.js";import"./building-2-JMpJ8PR2.js";import"./triangle-alert-D2inJjwx.js";import"./index-DF-QO9u9.js";import"./index-C45Zy3CK.js";import"./index-Bj6BLWTC.js";function Je({auth:Q,clinic:R,purchaseOrder:l,suppliers:V,inventoryItems:_}){var q;const[d,u]=w.useState([]);w.useEffect(()=>{l.items&&l.items.length>0?u(l.items.map(s=>{var t,n,o;return{inventory_id:((t=s.inventory_id)==null?void 0:t.toString())||"",quantity_ordered:((n=s.quantity_ordered)==null?void 0:n.toString())||"",unit_cost:((o=s.unit_cost)==null?void 0:o.toString())||"",expected_delivery_date:s.expected_delivery_date||"",notes:s.notes||""}})):u([{inventory_id:"",quantity_ordered:"",unit_cost:"",expected_delivery_date:"",notes:""}])},[l]);const{data:h,setData:m,put:O,processing:C,errors:r}=K({supplier_id:((q=l.supplier_id)==null?void 0:q.toString())||"",order_date:l.order_date||new Date().toISOString().split("T")[0],expected_delivery_date:l.expected_delivery_date||"",notes:l.notes||"",delivery_notes:l.delivery_notes||"",payment_terms:l.payment_terms||"",items:d});w.useEffect(()=>{m("items",d)},[d]);const $=()=>{u([...d,{inventory_id:"",quantity_ordered:"",unit_cost:"",expected_delivery_date:"",notes:""}])},z=s=>{if(d.length>1){const t=d.filter((n,o)=>o!==s);u(t)}},g=(s,t,n)=>{const o=[...d];o[s][t]=n,u(o)},b=s=>_.find(t=>t.id.toString()===s),S=s=>{const t=parseFloat(s.quantity_ordered)||0,n=parseFloat(s.unit_cost)||0;return t*n},k=()=>d.reduce((s,t)=>s+S(t),0),H=s=>{s.preventDefault(),O(route("clinic.purchase-orders.update",[R.id,l.id]))},I=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs(X,{auth:Q,children:[e.jsx(M,{title:"Edit Purchase Order"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-blue-150 to-cyan-100 rounded-t-lg mx-0 pt-4 shadow-2xl border border-blue-200/50 border-t border-t-blue-200",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 mx-5 mb-5 rounded-xl shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/5 rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-white/5 rounded-full translate-y-10 -translate-x-10"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-white/3 rounded-full -translate-y-8 -translate-x-8"}),e.jsx("div",{className:"relative px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/25 rounded-2xl backdrop-blur-sm border border-white/40 shadow-lg",children:e.jsx(W,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Edit Purchase Order"}),e.jsxs("p",{className:"text-blue-100 text-sm font-medium",children:["Update purchase order:"," ",l.po_number]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{variant:"outline",className:"font-medium bg-yellow-100 text-yellow-700 border-yellow-200",children:"Pending"}),e.jsxs(p,{variant:"outline",onClick:()=>window.history.back(),className:"gap-2 text-sm px-4 py-2 rounded-xl transition-all duration-300 border backdrop-blur-sm bg-white/20 border-white/30 text-white hover:bg-white/30",children:[e.jsx(Y,{className:"h-4 w-4"}),"Back"]})]})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 -mt--10 pb-12",children:e.jsx("form",{onSubmit:H,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(j,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(y,{className:"bg-gradient-to-r from-gray-50 via-blue-50/30 to-indigo-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Z,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xl font-bold text-gray-900",children:"Purchase Order Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update basic information for the purchase order"})]})]})}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"supplier_id",className:"text-sm font-medium text-gray-700",children:"Supplier *"}),e.jsxs(P,{value:h.supplier_id,onValueChange:s=>m("supplier_id",s),children:[e.jsx(A,{className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",children:e.jsx(F,{placeholder:"Select supplier"})}),e.jsx(E,{children:V.map(s=>e.jsx(U,{value:s.id.toString(),children:s.name},s.id))})]}),r.supplier_id&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.supplier_id]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"order_date",className:"text-sm font-medium text-gray-700",children:"Order Date *"}),e.jsx(x,{id:"order_date",type:"date",value:h.order_date,onChange:s=>m("order_date",s.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",required:!0}),r.order_date&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.order_date]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"expected_delivery_date",className:"text-sm font-medium text-gray-700",children:"Expected Delivery Date *"}),e.jsx(x,{id:"expected_delivery_date",type:"date",value:h.expected_delivery_date,onChange:s=>m("expected_delivery_date",s.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",required:!0}),r.expected_delivery_date&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.expected_delivery_date]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"payment_terms",className:"text-sm font-medium text-gray-700",children:"Payment Terms"}),e.jsx(x,{id:"payment_terms",type:"text",value:h.payment_terms,onChange:s=>m("payment_terms",s.target.value),placeholder:"e.g., Net 30, COD",className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"}),r.payment_terms&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.payment_terms]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"notes",className:"text-sm font-medium text-gray-700",children:"Notes"}),e.jsx(B,{id:"notes",value:h.notes,onChange:s=>m("notes",s.target.value),placeholder:"Additional notes for the purchase order...",className:"mt-1 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",rows:3}),r.notes&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.notes]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"delivery_notes",className:"text-sm font-medium text-gray-700",children:"Delivery Notes"}),e.jsx(B,{id:"delivery_notes",value:h.delivery_notes,onChange:s=>m("delivery_notes",s.target.value),placeholder:"Special delivery instructions...",className:"mt-1 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",rows:3}),r.delivery_notes&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.delivery_notes]})]})]})})]}),e.jsxs(j,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(y,{className:"bg-gradient-to-r from-gray-50 via-green-50/30 to-emerald-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(L,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xl font-bold text-gray-900",children:"Order Items"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update items in the purchase order"})]})]}),e.jsxs(p,{type:"button",onClick:$,className:"gap-2 bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded-lg",children:[e.jsx(ee,{className:"h-4 w-4"}),"Add Item"]})]})}),e.jsxs(f,{className:"p-6",children:[e.jsx("div",{className:"space-y-6",children:d.map((s,t)=>{var n,o,D,T;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Item ",t+1]}),d.length>1&&e.jsx(p,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(t),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Item *"}),e.jsxs(P,{value:s.inventory_id,onValueChange:a=>g(t,"inventory_id",a),children:[e.jsx(A,{className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",children:e.jsx(F,{placeholder:"Select item"})}),e.jsx(E,{children:_.map(a=>e.jsx(U,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Quantity *"}),e.jsx(x,{type:"number",min:"1",value:s.quantity_ordered,onChange:a=>g(t,"quantity_ordered",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Unit Cost *"}),e.jsx(x,{type:"number",min:"0",step:"0.01",value:s.unit_cost,onChange:a=>g(t,"unit_cost",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Total"}),e.jsx("div",{className:"mt-1 h-11 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg flex items-center",children:e.jsx("span",{className:"font-semibold text-gray-900",children:I(S(s))})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Expected Delivery Date"}),e.jsx(x,{type:"date",value:s.expected_delivery_date,onChange:a=>g(t,"expected_delivery_date",a.target.value),className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"Notes"}),e.jsx(x,{type:"text",value:s.notes,onChange:a=>g(t,"notes",a.target.value),placeholder:"Item-specific notes...",className:"mt-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]})]}),s.inventory_id&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Item Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((n=b(s.inventory_id))==null?void 0:n.quantity)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Min. Quantity:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((o=b(s.inventory_id))==null?void 0:o.minimum_quantity)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((D=b(s.inventory_id))==null?void 0:D.category)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"SKU:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((T=b(s.inventory_id))==null?void 0:T.sku)||"N/A"})]})]})]})]},t)})}),r.items&&e.jsxs("div",{className:"text-red-500 text-sm mt-4 flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-4"}),r.items]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30 sticky top-6",children:[e.jsx(y,{className:"bg-gradient-to-r from-gray-50 via-purple-50/30 to-violet-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xl font-bold text-gray-900",children:"Order Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review your updated purchase order"})]})]})}),e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Items:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d.filter(s=>s.inventory_id).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:"font-medium text-gray-900",children:d.reduce((s,t)=>s+(parseInt(t.quantity_ordered)||0),0)})]}),e.jsx(J,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:I(k())})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(p,{type:"submit",disabled:C||k()===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium",children:C?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating PO..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Update Purchase Order"]})}),e.jsxs(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),className:"w-full py-3 rounded-lg",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})]}),e.jsxs(j,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm overflow-hidden border border-blue-100/30",children:[e.jsx(y,{className:"bg-gradient-to-r from-gray-50 via-yellow-50/30 to-amber-50/20 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"h-4 w-4 text-white"})}),e.jsx("div",{children:e.jsx(v,{className:"text-lg font-bold text-gray-900",children:"Edit Tips"})})]})}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Only pending POs can be edited"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Add, remove, or modify items as needed"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Update quantities, costs, and delivery dates"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Review the updated total before saving"})]})]})})]})]})]})})})]})]})}export{Je as default};
