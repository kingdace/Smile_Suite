import{r as p,j as e,$ as xe,Y as b,m as J}from"./app-C8kdbIfg.js";import{E as je,R as U,C as pe,X as ge,Y as ue,T as q,a as fe}from"./ExportButton-RJcHpIAl.js";import{B as u}from"./button-CtBDG8qG.js";import{I as v}from"./input-CN750S7f.js";import{L as g}from"./label-0ZC4nNzA.js";import{S as O,a as W,b as Q,c as Z,d as c}from"./select-Boy15QeL.js";import{C as n,c as o,a as f,b as N}from"./card-m9OyGp2W.js";import{B as Ne}from"./badge-CO41UzeS.js";import"./popover-9IdPAxxQ.js";import"./dropdown-menu-CzncCTek.js";import{A as be}from"./AuthenticatedLayout-Cx6WDh0A.js";import{T as ve,a as ye,b as S,c as d,d as we,e as m}from"./table-AlgjwaNk.js";import{D as y}from"./dollar-sign-CFER_2Rp.js";import{A as Ce}from"./arrow-left-BD4LdG_T.js";import{T as Te}from"./trending-up-DCRNnnkh.js";import{C as ee}from"./circle-check-big-DnVHWdap.js";import{C as se}from"./clock-BXHeeKiP.js";import{C as re}from"./chart-column-BeRqsd1b.js";import{A as Me,a as _e}from"./AreaChart-DGWZ1htL.js";import{P as Ae,a as Fe}from"./PieChart-C0KIhKGG.js";import{S as ae}from"./search-D2Wd2LQe.js";import{F as Pe}from"./funnel-s4wrBOy3.js";import{E as ke}from"./eye-Dy8p4jCP.js";import{C as le}from"./circle-x-Bdkhn-X7.js";import{T as De}from"./trending-down-13ktVD_o.js";import{C as w}from"./credit-card-DcSB-VEr.js";import{B as Re}from"./building-Bvaun4WD.js";import{c as Be}from"./createLucideIcon-DmdO-xBx.js";import{f as te}from"./format-CYZdy3_o.js";import"./index-Cs505U2P.js";import"./utcTime-Bp1e7X_j.js";import"./SiteHeader-CK-PGA_T.js";import"./index-DHbohzxi.js";import"./user-Bvu1xyV6.js";import"./stethoscope-C-0Z68Vf.js";import"./x-D7X-cAQx.js";import"./download-Blox7fCr.js";import"./file-text-DoyO5FpF.js";import"./loader-circle-jGSMuC9r.js";import"./circle-alert-C34v1n4l.js";import"./index-CvHObFKz.js";import"./index-DQsPmgb4.js";import"./index-z3NYldYB.js";import"./chevron-right-Dgi3VfDJ.js";import"./circle-D0EEV1vX.js";import"./layout-dashboard-DoCe2Bsw.js";import"./users-BvixR2vM.js";import"./calendar-TWGUMU6x.js";import"./scissors-CttdPSXS.js";import"./shield-CLuEZxxw.js";import"./crown-BWorveNA.js";import"./zap-D7xPC3Ww.js";import"./info-CzTE822e.js";import"./building-2-C1oEGBDy.js";import"./triangle-alert-CJUA_boL.js";import"./ActivePoints-C-28U8SS.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],$e=Be("wallet",Ie);function Ls({auth:ce,clinic:h,payments:t,revenueStats:r,filters:a}){var E,H,L,K,V;const[C,T]=p.useState((a==null?void 0:a.search)||""),[M,_]=p.useState((a==null?void 0:a.status)||""),[A,F]=p.useState((a==null?void 0:a.payment_method)||""),[P,k]=p.useState((a==null?void 0:a.date_from)||""),[D,R]=p.useState((a==null?void 0:a.date_to)||""),B=()=>{J.get(route("clinic.reports.revenue",h.id),{search:C,status:M,payment_method:A,date_from:P,date_to:D},{preserveState:!0,preserveScroll:!0})},ie=()=>{T(""),_(""),F(""),k(""),R(""),J.get(route("clinic.reports.revenue",h.id),{},{preserveState:!0,preserveScroll:!0})},x=s=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s||0),ne=s=>s?te(new Date(s),"MMM dd, yyyy"):"N/A",oe=s=>s?te(new Date(s),"MMM dd, yyyy hh:mm a"):"N/A",de=s=>{const l={completed:{color:"bg-green-100 text-green-800",icon:ee},pending:{color:"bg-yellow-100 text-yellow-800",icon:se},failed:{color:"bg-red-100 text-red-800",icon:le},refunded:{color:"bg-orange-100 text-orange-800",icon:De},cancelled:{color:"bg-gray-100 text-gray-800",icon:le}},i=l[s==null?void 0:s.toLowerCase()]||l.pending,j=i.icon;return e.jsxs(Ne,{className:`${i.color} flex items-center gap-1`,children:[e.jsx(j,{className:"w-3 h-3"}),(s==null?void 0:s.charAt(0).toUpperCase())+(s==null?void 0:s.slice(1))]})},me=s=>{const l={cash:{icon:$e,color:"text-green-600"},card:{icon:w,color:"text-blue-600"},gcash:{icon:w,color:"text-blue-600"},bank_transfer:{icon:Re,color:"text-purple-600"},check:{icon:w,color:"text-gray-600"}},i=l[s==null?void 0:s.toLowerCase()]||l.cash,j=i.icon;return e.jsx(j,{className:`w-4 h-4 ${i.color}`})},I=s=>new Intl.NumberFormat().format(s),he=[{month:"Jan",revenue:125e3,payments:45},{month:"Feb",revenue:142e3,payments:52},{month:"Mar",revenue:138e3,payments:48},{month:"Apr",revenue:165e3,payments:61},{month:"May",revenue:152e3,payments:55},{month:"Jun",revenue:178e3,payments:58}],$=[{name:"Cash",value:((E=r==null?void 0:r.payment_methods)==null?void 0:E.cash)||0,color:"#10b981"},{name:"Card",value:((H=r==null?void 0:r.payment_methods)==null?void 0:H.card)||0,color:"#3b82f6"},{name:"GCash",value:((L=r==null?void 0:r.payment_methods)==null?void 0:L.gcash)||0,color:"#8b5cf6"},{name:"Bank Transfer",value:((K=r==null?void 0:r.payment_methods)==null?void 0:K.bank_transfer)||0,color:"#f59e0b"}];return e.jsxs(be,{user:ce.user,children:[e.jsx(xe,{title:"Revenue Report"}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Revenue Report"}),e.jsx("p",{className:"text-green-100",children:"Financial performance and payment analysis"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{exportRoute:`/clinic/${h.id}/reports/export/revenue`,filters:a,clinic:h,variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20"}),e.jsx(b,{href:route("clinic.reports.index",h.id),children:e.jsxs(u,{variant:"outline",size:"sm",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Back to Reports"]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(n,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x((r==null?void 0:r.total)||0)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(n,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x((r==null?void 0:r.this_month)||0)})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Te,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(n,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Payments"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:I((r==null?void 0:r.completed)||0)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ee,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(n,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:I((r==null?void 0:r.pending)||0)})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(se,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(n,{children:[e.jsx(f,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),"Monthly Revenue Trend"]})}),e.jsx(o,{children:e.jsx(U,{width:"100%",height:300,children:e.jsxs(Me,{data:he,children:[e.jsx(pe,{strokeDasharray:"3 3"}),e.jsx(ge,{dataKey:"month"}),e.jsx(ue,{}),e.jsx(q,{formatter:s=>x(s)}),e.jsx(_e,{type:"monotone",dataKey:"revenue",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})})})]}),e.jsxs(n,{children:[e.jsx(f,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),"Payment Methods Distribution"]})}),e.jsx(o,{children:e.jsx(U,{width:"100%",height:300,children:e.jsxs(Ae,{children:[e.jsx(Fe,{data:$,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:s,value:l})=>`${s}: ${x(l)}`,children:$.map((s,l)=>e.jsx(fe,{fill:s.color},`cell-${l}`))}),e.jsx(q,{formatter:s=>x(s)})]})})})]})]}),e.jsxs(n,{className:"mb-6",children:[e.jsx(f,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Search & Filter Payments"]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"search",children:"Search"}),e.jsx(v,{id:"search",placeholder:"Patient, treatment, ID...",value:C,onChange:s=>T(s.target.value),onKeyPress:s=>s.key==="Enter"&&B()})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"status",children:"Status"}),e.jsxs(O,{value:M,onValueChange:_,children:[e.jsx(W,{children:e.jsx(Q,{placeholder:"All Status"})}),e.jsxs(Z,{children:[e.jsx(c,{value:"",children:"All Status"}),e.jsx(c,{value:"completed",children:"Completed"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"failed",children:"Failed"}),e.jsx(c,{value:"refunded",children:"Refunded"}),e.jsx(c,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(O,{value:A,onValueChange:F,children:[e.jsx(W,{children:e.jsx(Q,{placeholder:"All Methods"})}),e.jsxs(Z,{children:[e.jsx(c,{value:"",children:"All Methods"}),e.jsx(c,{value:"cash",children:"Cash"}),e.jsx(c,{value:"card",children:"Card"}),e.jsx(c,{value:"gcash",children:"GCash"}),e.jsx(c,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(c,{value:"check",children:"Check"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"dateFrom",children:"From Date"}),e.jsx(v,{id:"dateFrom",type:"date",value:P,onChange:s=>k(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"dateTo",children:"To Date"}),e.jsx(v,{id:"dateTo",type:"date",value:D,onChange:s=>R(s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs(u,{onClick:B,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Search"]}),e.jsxs(u,{variant:"outline",onClick:ie,children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]})]}),e.jsxs(n,{children:[e.jsx(f,{children:e.jsx(N,{className:"flex items-center justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Payments (",(t==null?void 0:t.total)||0,")"]})})}),e.jsxs(o,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ve,{children:[e.jsx(ye,{children:e.jsxs(S,{children:[e.jsx(d,{children:"Transaction ID"}),e.jsx(d,{children:"Patient"}),e.jsx(d,{children:"Treatment"}),e.jsx(d,{children:"Amount"}),e.jsx(d,{children:"Method"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Date"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(we,{children:(V=t==null?void 0:t.data)==null?void 0:V.map(s=>{var l,i,j,Y,z,G,X;return e.jsxs(S,{children:[e.jsx(m,{children:e.jsx("div",{className:"font-mono text-sm",children:s.reference_number})}),e.jsx(m,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(i=(l=s.patient)==null?void 0:l.user)==null?void 0:i.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(Y=(j=s.patient)==null?void 0:j.user)==null?void 0:Y.email})]})}),e.jsx(m,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(z=s.treatment)==null?void 0:z.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(X=(G=s.treatment)==null?void 0:G.service)==null?void 0:X.name})]})}),e.jsx(m,{children:e.jsx("div",{className:"font-medium text-green-600",children:x(s.amount)})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[me(s.payment_method),e.jsx("span",{className:"capitalize",children:s.payment_method})]})}),e.jsx(m,{children:de(s.status)}),e.jsx(m,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ne(s.payment_date)}),e.jsx("p",{className:"text-sm text-gray-500",children:oe(s.created_at)})]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(b,{href:route("clinic.payments.show",[h.id,s.id]),children:e.jsx(u,{variant:"outline",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})})})})})]},s.id)})})]})}),(t==null?void 0:t.links)&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",t.from," to ",t.to," of"," ",t.total," results"]}),e.jsx("div",{className:"flex items-center gap-2",children:t.links.map((s,l)=>e.jsx(b,{href:s.url,className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-green-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},l))})]})]})]})]})}export{Ls as default};
