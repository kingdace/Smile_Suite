import{r,j as e}from"./app-ZxAlEvdA.js";import{X as C}from"./x-D6ZOpFzI.js";import{U as v}from"./user-BlbscHIi.js";import{L as P,C as D}from"./loader-circle-CFayPhnt.js";import{C as E}from"./calendar-BeQFvPO6.js";import{M as R}from"./map-pin-B6R7UNA3.js";import{S as M}from"./stethoscope-CTZofBPm.js";import{I as A}from"./info-DZklV24Z.js";import{C as L}from"./credit-card-C2KMiTDk.js";import{P as T}from"./phone-DyegMREk.js";import{S as $}from"./send-DtGdkEBQ.js";const x=({className:c="w-6 h-6",isOpen:n=!1})=>{const d=r.useRef(null);return r.useEffect(()=>{const t=d.current;if(t){const o=()=>{t.play().catch(i=>console.log("Video play failed:",i))};o();const l=()=>{t.currentTime=0,o()},m=()=>{o()};return t.addEventListener("ended",l),t.addEventListener("pause",m),()=>{t.removeEventListener("ended",l),t.removeEventListener("pause",m)}}},[]),e.jsx("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center bg-gradient-to-br from-cyan-600 via-blue-600 to-blue-700",children:e.jsxs("video",{ref:d,className:"w-full h-full object-contain",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",onLoadedData:t=>t.target.play(),onEnded:t=>{t.target.currentTime=0,t.target.play()},onError:t=>console.log("Video error:",t),onCanPlay:t=>t.target.play(),style:{imageRendering:"crisp-edges",WebkitImageRendering:"crisp-edges",imageRendering:"pixelated"},children:[e.jsx("source",{src:"/icons/smiley-video.mp4",type:"video/mp4"}),e.jsx("source",{src:"/icons/smiley-video.webm",type:"video/webm"}),e.jsx("img",{src:"/icons/smiley.png",alt:"SmileyDy - Dental AI Assistant",className:"w-full h-full object-contain",style:{imageRendering:"crisp-edges",WebkitImageRendering:"crisp-edges"}})]})})},J=({position:c="left"})=>{const[n,d]=r.useState(!1),[t,o]=r.useState(!1),[l,m]=r.useState([{id:1,type:"bot",content:"Hi! I'm SmileyDy ðŸ˜Š How can I help you find the perfect dental clinic today?",timestamp:new Date}]),[i,p]=r.useState(""),[h,g]=r.useState(!1),b=r.useRef(null),j=()=>{var s;(s=b.current)==null||s.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{j()},[l]);const N=[{icon:E,text:"Book Appointment",action:"book"},{icon:R,text:"Find Clinics",action:"find"},{icon:M,text:"Dental Services",action:"services"},{icon:A,text:"Platform Info",action:"platform"},{icon:v,text:"Patient Portal",action:"patient"},{icon:L,text:"Payment Methods",action:"payment"},{icon:T,text:"Contact Info",action:"contact"},{icon:D,text:"Help & Support",action:"help"}],k=s=>{let a="";switch(s){case"book":a="how do I book an appointment?";break;case"find":a="find clinics near me";break;case"services":a="what dental services are available?";break;case"platform":a="tell me about Smile Suite platform";break;case"patient":a="how does patient registration work?";break;case"payment":a="what payment methods do you accept?";break;case"contact":a="how can I contact a clinic?";break;case"help":a="I need help with something";break}u("user",a),y(a)},y=async s=>{g(!0);try{const a=await fetch("/api/chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const f=await a.json();u("bot",f.response)}catch(a){console.error("Chatbot error:",a),u("bot","Sorry, I'm having trouble right now. Please try again or contact us directly!")}finally{g(!1)}},u=(s,a)=>{const f={id:Date.now(),type:s,content:a,timestamp:new Date};m(I=>[...I,f])},w=async()=>{if(!i.trim()||h)return;const s=i.trim();p(""),u("user",s),y(s)},S=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),w())};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(!n),className:`fixed bottom-4 sm:bottom-6 w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 z-50 group transform hover:scale-105 active:scale-95 flex items-center justify-center ${c==="right"?"right-4 sm:right-6":"left-4 sm:left-6"} ${n?"rotate-90":""}`,style:{boxShadow:"0 8px 32px rgba(6, 182, 212, 0.4)",borderRadius:"50%",aspectRatio:"1/1",imageRendering:"crisp-edges",WebkitImageRendering:"crisp-edges"},children:n?e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(C,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white drop-shadow-lg group-hover:rotate-90 transition-transform duration-300"})}):e.jsx(x,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto group-hover:scale-110 transition-transform duration-300",isOpen:n})}),!n&&e.jsx("div",{className:`fixed bottom-20 z-40 flex items-center hidden sm:flex ${c==="right"?"right-2":"left-2"}`,children:e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-md px-2 py-1.5 shadow-lg border border-cyan-100",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1 h-1 bg-cyan-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Need help? ðŸ˜Š"})]})})}),n&&e.jsxs("div",{className:`fixed bottom-20 sm:bottom-24 w-auto sm:w-80 h-[24rem] sm:h-[28rem] bg-white rounded-2xl sm:rounded-3xl shadow-2xl border border-gray-100 z-40 flex flex-col overflow-hidden backdrop-blur-sm ${c==="right"?"right-2 sm:right-6 sm:left-auto":"left-2 right-2 sm:left-6 sm:right-auto"}`,children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600 via-blue-600 to-blue-700 p-1.5 sm:p-2 text-white",children:e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:e.jsx(x,{className:"w-4 h-4 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-xs sm:text-sm truncate",children:"SmileyDy"}),e.jsx("p",{className:"text-blue-100 text-xs truncate",children:"Dental assistant"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full animate-pulse"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-3 space-y-1.5 sm:space-y-2 bg-gray-50/50",children:[l.map(s=>e.jsx("div",{className:`flex ${s.type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[90%] sm:max-w-[85%] p-2.5 sm:p-3 rounded-xl sm:rounded-2xl ${s.type==="user"?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-br-md shadow-sm":"bg-white text-gray-800 rounded-bl-md shadow-sm border border-gray-100"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[s.type==="bot"&&e.jsx("div",{className:"w-6 h-6 bg-cyan-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(x,{className:"w-4 h-4"})}),s.type==="user"&&e.jsx("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(v,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"text-xs sm:text-sm leading-relaxed whitespace-pre-line",children:s.content})]})})},s.id)),h&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white p-3 rounded-2xl rounded-bl-md shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx(P,{className:"w-4 h-4 animate-spin text-cyan-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"SmileyDy is typing..."})]})})}),e.jsx("div",{ref:b})]}),e.jsxs("div",{className:"px-2 sm:px-3 py-1.5 sm:py-2 border-t border-gray-100 bg-white",children:[e.jsxs("button",{onClick:()=>o(!t),className:"w-full flex items-center justify-center gap-1.5 p-1.5 sm:p-2 bg-gradient-to-r from-cyan-50 to-blue-50 hover:from-cyan-100 hover:to-blue-100 text-cyan-700 rounded-md sm:rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-sm border border-cyan-100 active:scale-95",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"+"})}),e.jsx("span",{className:"font-medium text-xs",children:"Quick Actions"})]}),e.jsx("div",{className:`transform transition-transform duration-200 ${t?"rotate-45":""}`,children:e.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"+"})})})]}),t&&e.jsx("div",{className:"mt-2 grid grid-cols-4 gap-1 sm:gap-1.5 animate-in slide-in-from-top-2 duration-200",children:N.map((s,a)=>e.jsxs("button",{onClick:()=>{k(s.action),o(!1)},className:"flex flex-col items-center gap-1 p-1.5 sm:p-2 text-xs bg-gradient-to-r from-cyan-50 to-blue-50 hover:from-cyan-100 hover:to-blue-100 text-cyan-700 rounded-md sm:rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-sm border border-cyan-100 active:scale-95",children:[e.jsx(s.icon,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),e.jsx("span",{className:"font-medium text-xs leading-tight text-center",children:s.text})]},a))})]}),e.jsx("div",{className:"p-1.5 sm:p-2 border-t border-gray-100 bg-white",children:e.jsxs("div",{className:"flex gap-1 sm:gap-1.5",children:[e.jsx("input",{type:"text",value:i,onChange:s=>p(s.target.value),onKeyPress:S,placeholder:"Ask SmileyDy anything...",className:"flex-1 p-1.5 sm:p-2 border border-gray-200 rounded-md sm:rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-xs sm:text-sm bg-gray-50 focus:bg-white transition-colors",disabled:h}),e.jsx("button",{onClick:w,disabled:!i.trim()||h,className:"p-1.5 sm:p-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-md sm:rounded-lg hover:from-cyan-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 hover:shadow-lg active:scale-95",children:e.jsx($,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})})]})})]})]})};export{J as S};
