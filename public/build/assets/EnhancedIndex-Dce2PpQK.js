import{r as d,v as ie,j as e,$ as re,m as ne}from"./app-0NEBy9BJ.js";import{A as ce,D as M,b as O,c as I,d as P}from"./AuthenticatedLayout-Dw6WlmNe.js";import{B as t}from"./button-HTjkDkdd.js";import{C as u,a as N,b as _,c as j}from"./card-Bi1LQnVT.js";import{I as U}from"./input-B5HdwBrp.js";import{L as f}from"./label-QKzL7hA2.js";import{S as L,a as B,b as F,c as V,d as H}from"./select-D7GD0hqE.js";import{S as de}from"./switch-BMgsVYOq.js";import{T as oe,a as me,b as W,c as $}from"./tabs-BuaOaH2r.js";import{B as he}from"./badge-DRGinVhB.js";import{t as i}from"./index-CneNS-Qc.js";import{P as xe}from"./plus-CLctK3R5.js";import{U as z}from"./user-DGn9BjnL.js";import{C as pe}from"./clock-CbwVHyBM.js";import{S as ue}from"./square-pen-DjJtWlqh.js";import{T as je}from"./trash-2-E2swZgei.js";import{C as fe}from"./circle-check-big-CKkaOrUr.js";import{C as ge}from"./circle-x-DKXu_aeT.js";import"./index-D_vL4xTc.js";import"./layout-dashboard-CShM3v2X.js";import"./createLucideIcon-CXdhGpw2.js";import"./users-B27bU5zr.js";import"./calendar-BySnFgk6.js";import"./stethoscope-DQNiqfGN.js";import"./scissors-DUdWMhH-.js";import"./dollar-sign-DyPiHvO_.js";import"./chevron-right-uGxx9l95.js";import"./shield-Dwr4YKLO.js";import"./trending-up-BN2beQrY.js";import"./circle-alert-WXa1N7H8.js";import"./loader-circle-Dp3XKXsU.js";import"./SiteHeader-pucSt_3F.js";import"./index-DyBFjraK.js";import"./x-BmcQdfAq.js";import"./crown-CgVQCNXW.js";import"./zap-40k-cQGm.js";import"./info-BdUgvOC_.js";import"./building-2-DkFw8SPs.js";import"./file-text-D0kUTKvl.js";import"./triangle-alert-CrRGYxRV.js";import"./index-CWWwxASF.js";import"./index-DcAynW7B.js";import"./index-CR6Ll2Xh.js";const R=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}],ye=[{id:"standard_week",name:"Standard Week (Mon-Fri)",description:"9 AM - 5 PM, Monday to Friday",schedule:[{day:1,start:"09:00",end:"17:00"},{day:2,start:"09:00",end:"17:00"},{day:3,start:"09:00",end:"17:00"},{day:4,start:"09:00",end:"17:00"},{day:5,start:"09:00",end:"17:00"}]},{id:"extended_hours",name:"Extended Hours (Mon-Sat)",description:"8 AM - 6 PM, Monday to Saturday",schedule:[{day:1,start:"08:00",end:"18:00"},{day:2,start:"08:00",end:"18:00"},{day:3,start:"08:00",end:"18:00"},{day:4,start:"08:00",end:"18:00"},{day:5,start:"08:00",end:"18:00"},{day:6,start:"09:00",end:"14:00"}]}];function ds({auth:q,clinic:g,schedules:G,dentists:o}){var E,A;const[l,K]=d.useState(null),[y,C]=d.useState("list"),[X,r]=d.useState(!1),[Y,m]=d.useState(!1),[h,S]=d.useState(null),[x,T]=d.useState(null),{data:p,setData:c,post:k,put:J,processing:v,reset:b}=ie({user_id:"",day_of_week:"",start_time:"",end_time:"",buffer_time:15,slot_duration:30,is_available:!0,schedule_type:"weekly",notes:""}),w=l?G[l]||[]:[],Q=s=>{K(s);const a=o.find(n=>n.id.toString()===s);a&&i.success(`Viewing schedules for ${a.name}`)},Z=s=>{T(s),m(!0)},ee=()=>{if(!x||!l)return;const s={template_key:x.id,dentist_ids:[l]};k(route("clinic.dentist-schedules.create-from-template",{clinic:g.id}),{data:s,onSuccess:()=>{i.success(`Applied ${x.name} template successfully`),m(!1),T(null)},onError:a=>{Object.values(a).forEach(n=>i.error(n))}})},se=()=>{h?J(route("clinic.dentist-schedules.update",{clinic:g.id,schedule:h.id}),{onSuccess:()=>{i.success("Schedule updated successfully"),b(),S(null),r(!1)},onError:s=>{Object.values(s).forEach(a=>i.error(a))}}):k(route("clinic.dentist-schedules.store",{clinic:g.id}),{onSuccess:()=>{i.success("Schedule created successfully"),b(),r(!1)},onError:s=>{Object.values(s).forEach(a=>i.error(a))}})},ae=s=>{var a;S(s),c({user_id:s.user_id.toString(),day_of_week:((a=s.day_of_week)==null?void 0:a.toString())||"",start_time:s.start_time.substring(0,5),end_time:s.end_time.substring(0,5),buffer_time:s.buffer_time||15,slot_duration:s.slot_duration||30,is_available:s.is_available,schedule_type:s.schedule_type||"weekly",notes:s.notes||""}),r(!0)},te=s=>{confirm("Are you sure you want to delete this schedule?")&&ne.delete(route("clinic.dentist-schedules.destroy",{clinic:g.id,schedule:s.id}),{onSuccess:()=>{i.success("Schedule deleted successfully")},onError:()=>{i.error("Failed to delete schedule")}})},D=s=>{var a;return((a=R.find(n=>n.value===s))==null?void 0:a.label)||"Unknown"},le=s=>s?e.jsx(fe,{className:"h-4 w-4 text-green-500"}):e.jsx(ge,{className:"h-4 w-4 text-red-500"});return e.jsxs(ce,{auth:q,children:[e.jsx(re,{title:"Enhanced Schedule Management"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Enhanced Schedule Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage dentist schedules and templates"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{onClick:()=>m(!0),variant:"outline",children:"Templates"}),e.jsxs(t,{onClick:()=>r(!0),children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]})]})}),e.jsxs(u,{className:"mb-6",children:[e.jsx(N,{children:e.jsx(_,{children:"Select Dentist"})}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:o.map(s=>e.jsxs(t,{variant:l===s.id.toString()?"default":"outline",onClick:()=>Q(s.id.toString()),className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:s.name})]},s.id))})})]}),e.jsxs(oe,{children:[e.jsxs(me,{className:"grid w-full grid-cols-2",children:[e.jsx(W,{active:y==="list",onClick:()=>C("list"),children:"List View"}),e.jsx(W,{active:y==="templates",onClick:()=>C("templates"),children:"Templates"})]}),y==="list"&&e.jsx($,{className:"space-y-4",children:l?e.jsxs(u,{children:[e.jsx(N,{children:e.jsxs(_,{children:["Schedules for"," ",(E=o.find(s=>s.id.toString()===l))==null?void 0:E.name]})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No schedules found"}),e.jsx(t,{onClick:()=>r(!0),className:"mt-4",children:"Add First Schedule"})]}):w.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[le(s.is_available),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:D(s.day_of_week)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.start_time," ","-"," ",s.end_time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{variant:s.is_available?"default":"secondary",children:s.is_available?"Available":"Unavailable"}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>ae(s),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>te(s),children:e.jsx(je,{className:"h-4 w-4"})})]})]},s.id))})})]}):e.jsx(u,{children:e.jsxs(j,{className:"text-center py-8",children:[e.jsx(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Please select a dentist to view schedules"})]})})}),y==="templates"&&e.jsx($,{className:"space-y-4",children:e.jsxs(u,{children:[e.jsx(N,{children:e.jsx(_,{children:"Schedule Templates"})}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ye.map(s=>e.jsx(u,{className:"hover:shadow-md transition-shadow",children:e.jsxs(j,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:s.description}),e.jsx("div",{className:"space-y-1 mb-4",children:s.schedule.map((a,n)=>e.jsxs("div",{className:"text-xs text-gray-600",children:[D(a.day),":"," ",a.start," ","-"," ",a.end]},n))}),e.jsx(t,{onClick:()=>Z(s),className:"w-full",size:"sm",children:"Use Template"})]})},s.id))})})]})})]})]})}),e.jsx(M,{open:Y,onOpenChange:m,children:e.jsxs(O,{children:[e.jsx(I,{children:e.jsx(P,{children:"Apply Template"})}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Apply ",e.jsx("strong",{children:x.name})," ","to"," ",l?e.jsx("strong",{children:(A=o.find(s=>s.id.toString()===l))==null?void 0:A.name}):"selected dentist","?"]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(t,{onClick:ee,disabled:!l||v,children:v?"Applying...":"Apply Template"})]})]})]})}),e.jsx(M,{open:X,onOpenChange:r,children:e.jsxs(O,{children:[e.jsx(I,{children:e.jsx(P,{children:h?"Edit Schedule":"Create Schedule"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Dentist"}),e.jsxs(L,{value:p.user_id,onValueChange:s=>c("user_id",s),disabled:h!==null,children:[e.jsx(B,{children:e.jsx(F,{placeholder:"Select dentist"})}),e.jsx(V,{children:o.map(s=>e.jsx(H,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Day of Week"}),e.jsxs(L,{value:p.day_of_week,onValueChange:s=>c("day_of_week",s),children:[e.jsx(B,{children:e.jsx(F,{placeholder:"Select day"})}),e.jsx(V,{children:R.map(s=>e.jsx(H,{value:s.value.toString(),children:s.label},s.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Start Time"}),e.jsx(U,{type:"time",value:p.start_time,onChange:s=>c("start_time",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"End Time"}),e.jsx(U,{type:"time",value:p.end_time,onChange:s=>c("end_time",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:p.is_available,onCheckedChange:s=>c("is_available",s)}),e.jsx(f,{children:"Available for appointments"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>{r(!1),b(),S(null)},children:"Cancel"}),e.jsx(t,{onClick:se,disabled:v,children:v?"Saving...":h?"Update":"Create"})]})]})]})})]})}export{ds as default};
