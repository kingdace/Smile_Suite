import{r as v,j as e,$ as ce,Y as f,m as V}from"./app-39CltzEZ.js";import{E as ae,R as X,C as oe,X as de,Y as ne,T as z,a as me}from"./ExportButton-DGgiTuAo.js";import{A as xe}from"./AuthenticatedLayout-DAIL1WSW.js";import{C as d,c as n,a as g,b as u}from"./card-BLkHE8sY.js";import{B as b}from"./button-DZ_gML5Q.js";import{I as he}from"./input-CcAhDJhh.js";import{L as w}from"./label-Bg6684iw.js";import{S as J,a as O,b as U,c as G,d as a}from"./select-BYMhtYx4.js";import{B as q}from"./badge-C-fT_-Vh.js";import{T as te,a as pe,b as y,c as m,d as je,e as o}from"./table-BwxvwXgZ.js";import{S as C}from"./stethoscope-D2JWLnHx.js";import{A as ge}from"./arrow-left-D6PCTDta.js";import{C as Q}from"./circle-check-big-CimBC4wv.js";import{T as ue}from"./trending-up-BDvcMIUS.js";import{D as be}from"./dollar-sign-DQvL8DQu.js";import{C as W}from"./chart-column-DYj6UocN.js";import{A as Ne,a as Z}from"./AreaChart-BOW2GQeK.js";import{P as ve,a as fe}from"./PieChart-kqS0CSFq.js";import{S}from"./search-C6SiwdVk.js";import{F as we}from"./funnel-CKR9NIwL.js";import{E as ye}from"./eye-BUHAR-rv.js";import{C as Ce}from"./circle-x-C4YgnnCA.js";import{C as ee}from"./clock-BBc8nnP2.js";import{f as Te}from"./format-CYZdy3_o.js";import"./index-_tIDeRDz.js";import"./utcTime-Bp1e7X_j.js";import"./SiteHeader-DtlqUCBU.js";import"./index-CFS1jKyZ.js";import"./user-D35wEu3C.js";import"./createLucideIcon-xeUr5X85.js";import"./x-CqBn5iPF.js";import"./dropdown-menu-CYDhxRPB.js";import"./index-4Ki7rgkc.js";import"./index-BAONOB1_.js";import"./chevron-right-CWYJv26h.js";import"./circle-CaTL3Gjk.js";import"./download-BdcXgxGw.js";import"./file-text-FuBW91uK.js";import"./loader-circle-BAcDSp6x.js";import"./circle-alert-D2uNRAFV.js";import"./layout-dashboard-Dp9LfgaF.js";import"./users-dGa3C9VZ.js";import"./calendar-BbVrfnTN.js";import"./scissors-BOi86H-6.js";import"./shield-GvYRLlTB.js";import"./crown-C5pvfQnJ.js";import"./zap-C5ILOiJW.js";import"./info-ZkN8-IGL.js";import"./building-2-BeTWUnmZ.js";import"./triangle-alert-BjwR-vki.js";import"./index-DZw1oBW6.js";import"./ActivePoints-2yFz_T9Q.js";function Cs({auth:se,clinic:x,treatments:r,treatmentStats:l,filters:c}){var D,I,$,E,M;const[T,A]=v.useState((c==null?void 0:c.search)||""),[t,k]=v.useState((c==null?void 0:c.status)||"all"),[p,P]=v.useState((c==null?void 0:c.category)||"all"),R=()=>{const s={search:T};t&&t!=="all"&&(s.status=t),p&&p!=="all"&&(s.category=p),V.get(route("clinic.reports.treatments",x.id),s,{preserveState:!0,preserveScroll:!0})},le=()=>{A(""),k("all"),P("all"),V.get(route("clinic.reports.treatments",x.id),{},{preserveState:!0,preserveScroll:!0})},F=s=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s||0),_=s=>s?Te(new Date(s),"MMM dd, yyyy"):"N/A",N=s=>new Intl.NumberFormat().format(s),re=s=>{const i={completed:{color:"bg-green-100 text-green-800",icon:Q},pending:{color:"bg-yellow-100 text-yellow-800",icon:ee},in_progress:{color:"bg-blue-100 text-blue-800",icon:ee},cancelled:{color:"bg-red-100 text-red-800",icon:Ce}},h=i[s==null?void 0:s.toLowerCase()]||i.pending,j=h.icon;return e.jsxs(q,{className:`${h.color} flex items-center gap-1`,children:[e.jsx(j,{className:"w-3 h-3"}),(s==null?void 0:s.charAt(0).toUpperCase())+(s==null?void 0:s.slice(1))]})},ie=[{month:"Jan",treatments:25,completed:20,revenue:85e3},{month:"Feb",treatments:32,completed:28,revenue:112e3},{month:"Mar",treatments:28,completed:24,revenue:98e3},{month:"Apr",treatments:35,completed:31,revenue:125e3},{month:"May",treatments:30,completed:26,revenue:105e3},{month:"Jun",treatments:38,completed:34,revenue:135e3}],B=[{name:"Completed",value:(l==null?void 0:l.completed)||0,color:"#10b981"},{name:"Pending",value:(l==null?void 0:l.pending)||0,color:"#f59e0b"},{name:"In Progress",value:(l==null?void 0:l.in_progress)||0,color:"#3b82f6"},{name:"Cancelled",value:(l==null?void 0:l.cancelled)||0,color:"#ef4444"}];return(D=l==null?void 0:l.categories)!=null&&D.preventive,(I=l==null?void 0:l.categories)!=null&&I.restorative,($=l==null?void 0:l.categories)!=null&&$.surgical,(E=l==null?void 0:l.categories)!=null&&E.cosmetic,e.jsxs(xe,{auth:se,children:[e.jsx(ce,{title:"Treatments Report"}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:e.jsx(C,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Treatments Report"}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Treatment performance and patient care analysis"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{exportRoute:`/clinic/${x.id}/reports/export/treatments`,filters:c,clinic:x,variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 text-sm px-3 py-2"}),e.jsx(f,{href:route("clinic.reports.index",x.id),children:e.jsxs(b,{variant:"outline",size:"sm",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 text-sm px-3 py-2",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Back"]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Treatments"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:N((l==null?void 0:l.total)||0)})]}),e.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:e.jsx(C,{className:"w-5 h-5 text-indigo-600"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:N((l==null?void 0:l.completed)||0)})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(Q,{className:"w-5 h-5 text-green-600"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:N((l==null?void 0:l.this_month)||0)})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ue,{className:"w-5 h-5 text-blue-600"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:F((l==null?void 0:l.total_revenue)||0)})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-green-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsxs(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:[e.jsx(g,{className:"pb-3",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(W,{className:"w-5 h-5 text-indigo-600"}),"Treatment Trends"]})}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:250,children:e.jsxs(Ne,{data:ie,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(de,{dataKey:"month"}),e.jsx(ne,{}),e.jsx(z,{}),e.jsx(Z,{type:"monotone",dataKey:"treatments",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.3}),e.jsx(Z,{type:"monotone",dataKey:"completed",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})})})]}),e.jsxs(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:[e.jsx(g,{className:"pb-3",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(W,{className:"w-5 h-5 text-indigo-600"}),"Status Distribution"]})}),e.jsx(n,{children:e.jsx(X,{width:"100%",height:250,children:e.jsxs(ve,{children:[e.jsx(fe,{data:B,cx:"50%",cy:"50%",outerRadius:70,dataKey:"value",label:({name:s,value:i})=>`${s}: ${i}`,children:B.map((s,i)=>e.jsx(me,{fill:s.color},`cell-${i}`))}),e.jsx(z,{})]})})})]})]}),e.jsxs(d,{className:"mb-4 border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:[e.jsx(g,{className:"pb-3",children:e.jsxs(u,{className:"flex items-center gap-2 text-lg",children:[e.jsx(S,{className:"w-5 h-5 text-indigo-600"}),"Search & Filter Treatments"]})}),e.jsxs(n,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"search",className:"text-sm font-medium",children:"Search"}),e.jsx(he,{id:"search",placeholder:"Patient name, treatment name...",value:T,onChange:s=>A(s.target.value),onKeyPress:s=>s.key==="Enter"&&R(),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),e.jsxs(J,{value:t,onValueChange:k,children:[e.jsx(O,{className:"mt-1",children:e.jsx(U,{placeholder:"All Status"})}),e.jsxs(G,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"in_progress",children:"In Progress"}),e.jsx(a,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),e.jsxs(J,{value:p,onValueChange:P,children:[e.jsx(O,{className:"mt-1",children:e.jsx(U,{placeholder:"All Categories"})}),e.jsxs(G,{children:[e.jsx(a,{value:"all",children:"All Categories"}),e.jsx(a,{value:"preventive",children:"Preventive"}),e.jsx(a,{value:"restorative",children:"Restorative"}),e.jsx(a,{value:"surgical",children:"Surgical"}),e.jsx(a,{value:"cosmetic",children:"Cosmetic"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsxs(b,{onClick:R,className:"bg-indigo-600 hover:bg-indigo-700 text-sm px-4 py-2",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Search"]}),e.jsxs(b,{variant:"outline",onClick:le,className:"text-sm px-4 py-2",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]})]}),e.jsxs(d,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm",children:[e.jsx(g,{className:"pb-3",children:e.jsx(u,{className:"flex items-center justify-between text-lg",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-indigo-600"}),"Treatments (",(r==null?void 0:r.total)||0,")"]})})}),e.jsxs(n,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(te,{children:[e.jsx(pe,{children:e.jsxs(y,{className:"bg-gray-50",children:[e.jsx(m,{className:"font-semibold",children:"Patient"}),e.jsx(m,{className:"font-semibold",children:"Treatment"}),e.jsx(m,{className:"font-semibold",children:"Service"}),e.jsx(m,{className:"font-semibold",children:"Dentist"}),e.jsx(m,{className:"font-semibold",children:"Cost"}),e.jsx(m,{className:"font-semibold",children:"Status"}),e.jsx(m,{className:"font-semibold",children:"Start Date"}),e.jsx(m,{className:"font-semibold",children:"Actions"})]})}),e.jsx(je,{children:((M=r==null?void 0:r.data)==null?void 0:M.length)>0?r.data.map(s=>{var i,h,j,H,K,L,Y;return e.jsxs(y,{className:"hover:bg-gray-50",children:[e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(h=(i=s.patient)==null?void 0:i.user)==null?void 0:h.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(H=(j=s.patient)==null?void 0:j.user)==null?void 0:H.email})]})}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.description})]})}),e.jsx(o,{children:e.jsx(q,{variant:"outline",children:(K=s.service)==null?void 0:K.name})}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(L=s.dentist)==null?void 0:L.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(Y=s.dentist)==null?void 0:Y.email})]})}),e.jsx(o,{children:e.jsx("div",{className:"font-medium text-green-600",children:F(s.cost||0)})}),e.jsx(o,{children:re(s.status)}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_(s.start_date)}),s.end_date&&e.jsxs("p",{className:"text-sm text-gray-500",children:["End:"," ",_(s.end_date)]})]})}),e.jsx(o,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{href:route("clinic.treatments.show",[x.id,s.id]),children:e.jsx(b,{variant:"outline",size:"sm",children:e.jsx(ye,{className:"w-4 h-4"})})})})})]},s.id)}):e.jsx(y,{children:e.jsx(o,{colSpan:8,className:"text-center py-8 text-gray-500",children:"No treatments found"})})})]})}),(r==null?void 0:r.links)&&r.links.length>0&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",r.from," to ",r.to," of"," ",r.total," results"]}),e.jsx("div",{className:"flex items-center gap-2",children:r.links.map((s,i)=>e.jsx(f,{href:s.url||"#",className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-indigo-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},i))})]})]})]})]})}export{Cs as default};
