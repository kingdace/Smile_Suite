import{r as f,j as e,$ as Z,Y as N,m as q}from"./app-0NEBy9BJ.js";import{E as y,R as D,a as ee,T as $,C as se,X as le,Y as re}from"./ExportButton-JoKoNBtV.js";import{A as ae}from"./AuthenticatedLayout-Dw6WlmNe.js";import{C as o,c as m,a as n,b as j}from"./card-Bi1LQnVT.js";import{B as p}from"./button-HTjkDkdd.js";import{I as ce}from"./input-B5HdwBrp.js";import{L as b}from"./label-QKzL7hA2.js";import{S as H,a as K,b as V,c as M,d as c}from"./select-D7GD0hqE.js";import{B as u}from"./badge-DRGinVhB.js";import{T as ie,a as te,b as O,c as i,d as de,e as t}from"./table-C4LRoVXB.js";import{P as w}from"./scissors-DUdWMhH-.js";import{A as oe}from"./arrow-left-D43ESfQ7.js";import{T as Y}from"./triangle-alert-CrRGYxRV.js";import{C as z}from"./circle-x-DKXu_aeT.js";import{D as me}from"./dollar-sign-DyPiHvO_.js";import{C as U}from"./chart-column-BayDDSxC.js";import{P as xe,a as he}from"./PieChart-Tw84ux5t.js";import{B as ne,a as je}from"./BarChart-CSIsX4lb.js";import{S as X}from"./search-DQeRNUKD.js";import{F as pe}from"./funnel-gngOd4J3.js";import{E as ue}from"./eye-BPTaohOe.js";import{C as ge}from"./circle-check-big-CKkaOrUr.js";import"./index-D_vL4xTc.js";import"./utcTime-Bp1e7X_j.js";import"./SiteHeader-pucSt_3F.js";import"./index-DyBFjraK.js";import"./user-DGn9BjnL.js";import"./createLucideIcon-CXdhGpw2.js";import"./stethoscope-DQNiqfGN.js";import"./x-BmcQdfAq.js";import"./dropdown-menu-9HAQh9sF.js";import"./index-CWWwxASF.js";import"./index-DcAynW7B.js";import"./chevron-right-uGxx9l95.js";import"./circle-CkW3sI5F.js";import"./download-DvekdBIG.js";import"./file-text-D0kUTKvl.js";import"./loader-circle-Dp3XKXsU.js";import"./circle-alert-WXa1N7H8.js";import"./layout-dashboard-CShM3v2X.js";import"./users-B27bU5zr.js";import"./calendar-BySnFgk6.js";import"./clock-CbwVHyBM.js";import"./shield-Dwr4YKLO.js";import"./trending-up-BN2beQrY.js";import"./crown-CgVQCNXW.js";import"./zap-40k-cQGm.js";import"./info-BdUgvOC_.js";import"./building-2-DkFw8SPs.js";import"./index-CR6Ll2Xh.js";import"./ErrorBarContext-9ACONtTU.js";function ps({auth:G,clinic:x,inventory:r,inventoryStats:s,filters:a}){var P,E,F,L,R;const[k,C]=f.useState((a==null?void 0:a.search)||""),[_,I]=f.useState((a==null?void 0:a.category)||""),[T,v]=f.useState((a==null?void 0:a.stock_status)||""),A=()=>{q.get(route("clinic.reports.inventory",x.id),{search:k,category:_,stock_status:T},{preserveState:!0,preserveScroll:!0})},Q=()=>{C(""),I(""),v(""),q.get(route("clinic.reports.inventory",x.id),{},{preserveState:!0,preserveScroll:!0})},g=l=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l||0),h=l=>new Intl.NumberFormat().format(l),J=l=>{const d=l.quantity||0,W=l.min_stock||0;return d===0?e.jsxs(u,{className:"bg-red-100 text-red-800 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),"Out of Stock"]}):d<=W?e.jsxs(u,{className:"bg-yellow-100 text-yellow-800 flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),"Low Stock"]}):e.jsxs(u,{className:"bg-green-100 text-green-800 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"In Stock"]})},B=[{name:"In Stock",value:(s==null?void 0:s.in_stock)||0,color:"#10b981"},{name:"Low Stock",value:(s==null?void 0:s.low_stock)||0,color:"#f59e0b"},{name:"Out of Stock",value:(s==null?void 0:s.out_of_stock)||0,color:"#ef4444"}],S=[{name:"Dental Supplies",value:((P=s==null?void 0:s.categories)==null?void 0:P.dental_supplies)||0,color:"#3b82f6"},{name:"Medications",value:((E=s==null?void 0:s.categories)==null?void 0:E.medications)||0,color:"#8b5cf6"},{name:"Equipment",value:((F=s==null?void 0:s.categories)==null?void 0:F.equipment)||0,color:"#f59e0b"},{name:"Consumables",value:((L=s==null?void 0:s.categories)==null?void 0:L.consumables)||0,color:"#10b981"}];return e.jsxs(ae,{user:G.user,children:[e.jsx(Z,{title:"Inventory Report"}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Inventory Report"}),e.jsx("p",{className:"text-purple-100",children:"Stock levels and inventory management analysis"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{exportRoute:`/clinic/${x.id}/reports/export/inventory`,filters:a,clinic:x,variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20"}),e.jsx(N,{href:route("clinic.reports.index",x.id),children:e.jsxs(p,{variant:"outline",size:"sm",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Back to Reports"]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h((s==null?void 0:s.total)||0)})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h((s==null?void 0:s.low_stock)||0)})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(Y,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h((s==null?void 0:s.out_of_stock)||0)})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-red-600"})})]})})}),e.jsx(o,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g((s==null?void 0:s.total_value)||0)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(me,{className:"w-6 h-6 text-green-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Stock Status Distribution"]})}),e.jsx(m,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(xe,{children:[e.jsx(he,{data:B,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:l,value:d})=>`${l}: ${d}`,children:B.map((l,d)=>e.jsx(ee,{fill:l.color},`cell-${d}`))}),e.jsx($,{})]})})})]}),e.jsxs(o,{children:[e.jsx(n,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Category Distribution"]})}),e.jsx(m,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(ne,{data:S,children:[e.jsx(se,{strokeDasharray:"3 3"}),e.jsx(le,{dataKey:"name"}),e.jsx(re,{}),e.jsx($,{}),e.jsx(je,{dataKey:"value",fill:"#8b5cf6"})]})})})]})]}),e.jsxs(o,{className:"mb-6",children:[e.jsx(n,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Search & Filter Inventory"]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"search",children:"Search"}),e.jsx(ce,{id:"search",placeholder:"Item name, SKU, description...",value:k,onChange:l=>C(l.target.value),onKeyPress:l=>l.key==="Enter"&&A()})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"category",children:"Category"}),e.jsxs(H,{value:_,onValueChange:I,children:[e.jsx(K,{children:e.jsx(V,{placeholder:"All Categories"})}),e.jsxs(M,{children:[e.jsx(c,{value:"",children:"All Categories"}),e.jsx(c,{value:"dental_supplies",children:"Dental Supplies"}),e.jsx(c,{value:"medications",children:"Medications"}),e.jsx(c,{value:"equipment",children:"Equipment"}),e.jsx(c,{value:"consumables",children:"Consumables"})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"stockStatus",children:"Stock Status"}),e.jsxs(H,{value:T,onValueChange:v,children:[e.jsx(K,{children:e.jsx(V,{placeholder:"All Status"})}),e.jsxs(M,{children:[e.jsx(c,{value:"",children:"All Status"}),e.jsx(c,{value:"in_stock",children:"In Stock"}),e.jsx(c,{value:"low_stock",children:"Low Stock"}),e.jsx(c,{value:"out_of_stock",children:"Out of Stock"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs(p,{onClick:A,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Search"]}),e.jsxs(p,{variant:"outline",onClick:Q,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]})]}),e.jsxs(o,{children:[e.jsx(n,{children:e.jsx(j,{className:"flex items-center justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Inventory Items (",(r==null?void 0:r.total)||0,")"]})})}),e.jsxs(m,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ie,{children:[e.jsx(te,{children:e.jsxs(O,{children:[e.jsx(i,{children:"Item"}),e.jsx(i,{children:"SKU"}),e.jsx(i,{children:"Category"}),e.jsx(i,{children:"Quantity"}),e.jsx(i,{children:"Min Stock"}),e.jsx(i,{children:"Unit Price"}),e.jsx(i,{children:"Total Value"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(de,{children:(R=r==null?void 0:r.data)==null?void 0:R.map(l=>e.jsxs(O,{children:[e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.description})]})}),e.jsx(t,{children:e.jsx("div",{className:"font-mono text-sm",children:l.sku})}),e.jsx(t,{children:e.jsx(u,{variant:"outline",className:"capitalize",children:l.category})}),e.jsx(t,{children:e.jsx("div",{className:"font-medium",children:h(l.quantity||0)})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm text-gray-600",children:h(l.min_stock||0)})}),e.jsx(t,{children:e.jsx("div",{className:"font-medium",children:g(l.unit_price||0)})}),e.jsx(t,{children:e.jsx("div",{className:"font-medium text-green-600",children:g((l.quantity||0)*(l.unit_price||0))})}),e.jsx(t,{children:J(l)}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(N,{href:route("clinic.inventory.show",[x.id,l.id]),children:e.jsx(p,{variant:"outline",size:"sm",children:e.jsx(ue,{className:"w-4 h-4"})})})})})]},l.id))})]})}),(r==null?void 0:r.links)&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",r.from," to ",r.to," of"," ",r.total," results"]}),e.jsx("div",{className:"flex items-center gap-2",children:r.links.map((l,d)=>e.jsx(N,{href:l.url,className:`px-3 py-2 text-sm rounded-md ${l.active?"bg-purple-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"} ${!l.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:l.label}},d))})]})]})]})]})}export{ps as default};
