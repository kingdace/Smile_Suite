import{r as j,v as L,j as e,$ as R}from"./app-ZxAlEvdA.js";import{A as q}from"./AuthenticatedLayout-lb_6FM8B.js";import{C as r,a as n,b as x,c as l}from"./card-8RzoEylS.js";import{B as f}from"./button-Cdvy3pKR.js";import{I as b}from"./input-BVJoeVSR.js";import{L as u}from"./label-Dv-o7-Lo.js";import{B as m}from"./badge-DeLva7dQ.js";import"./separator-D0agNfqO.js";import{S as A,a as E,b as H,c as P,d}from"./select-B36B8fk8.js";import{C as V}from"./chart-column-D0KbTPjF.js";import{D as B}from"./download-DIT3-u_V.js";import{H as M}from"./hash-CpZl0LT9.js";import{D as $}from"./dollar-sign-Dwk-W496.js";import{P as v}from"./scissors-C-Mp-MSs.js";import{T as _}from"./triangle-alert-Bme-bFGp.js";import{T as Q}from"./trending-up-NOBgyg1_.js";import{F as z}from"./file-text-D4WzFC7v.js";import"./index-IHKkMNBC.js";import"./layout-dashboard-B70FXRdI.js";import"./createLucideIcon-yAbt-hik.js";import"./users-BcLHi-9n.js";import"./calendar-BeQFvPO6.js";import"./clock-BC-UvfcT.js";import"./stethoscope-CTZofBPm.js";import"./chevron-right-Ci7H8W9R.js";import"./shield-CFZmCQiG.js";import"./circle-alert-Cy-oflQw.js";import"./loader-circle-CFayPhnt.js";import"./SiteHeader-Tox9uOJi.js";import"./index-HZL0sppC.js";import"./user-BlbscHIi.js";import"./x-D6ZOpFzI.js";import"./crown-BR3Vq5b2.js";import"./zap-D0r5IUQk.js";import"./circle-check-big-DWWEvFDf.js";import"./info-DZklV24Z.js";import"./circle-x-BGvtilGz.js";import"./building-2-Bgi5jK8p.js";import"./index-CivZWDrm.js";import"./index-qTCBntEe.js";import"./index-t2V_51tC.js";function Ae({auth:w,inventoryUsage:s,filters:a}){const[g,G]=j.useState({start_date:(a==null?void 0:a.start_date)||"",end_date:(a==null?void 0:a.end_date)||""}),[S,J]=j.useState((a==null?void 0:a.category)||""),[C,K]=j.useState((a==null?void 0:a.inventory_id)||""),{data:i,setData:o,get:T,processing:N}=L({start_date:g.start_date,end_date:g.end_date,category:S,inventory_id:C}),I=()=>{T(route("clinic.reports.inventory-usage"),{preserveState:!0,preserveScroll:!0})},k=()=>{const t=new URLSearchParams({...i,export:"excel"});window.open(route("clinic.reports.export.inventory-usage")+"?"+t.toString())},h=t=>"₱"+parseFloat(t||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),F=()=>(s==null?void 0:s.reduce((t,c)=>t+c.total_quantity_used,0))||0,D=()=>(s==null?void 0:s.reduce((t,c)=>t+c.total_value,0))||0,y=()=>(s==null?void 0:s.slice(0,5))||[],p=()=>(s==null?void 0:s.filter(t=>t.current_stock<=t.minimum_quantity))||[];return e.jsxs(q,{user:w.user,children:[e.jsx(R,{title:"Inventory Usage Report"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(V,{className:"h-6 w-6 text-blue-600"}),"Inventory Usage Report"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track inventory consumption across treatments"})]}),e.jsxs(f,{onClick:k,className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Export Excel"]})]}),e.jsxs(r,{className:"mb-6",children:[e.jsx(n,{children:e.jsx(x,{className:"text-lg",children:"Report Filters"})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"start_date",children:"Start Date"}),e.jsx(b,{id:"start_date",type:"date",value:i.start_date,onChange:t=>o("start_date",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"end_date",children:"End Date"}),e.jsx(b,{id:"end_date",type:"date",value:i.end_date,onChange:t=>o("end_date",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"category",children:"Category"}),e.jsxs(A,{value:i.category,onValueChange:t=>o("category",t),children:[e.jsx(E,{children:e.jsx(H,{placeholder:"All Categories"})}),e.jsxs(P,{children:[e.jsx(d,{value:"",children:"All Categories"}),e.jsx(d,{value:"medication",children:"Medication"}),e.jsx(d,{value:"supplies",children:"Supplies"}),e.jsx(d,{value:"equipment",children:"Equipment"}),e.jsx(d,{value:"materials",children:"Materials"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(f,{onClick:I,disabled:N,className:"w-full",children:N?"Filtering...":"Apply Filters"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items Used"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F()})]}),e.jsx(M,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(D())})]}),e.jsx($,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unique Items"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.length)||0})]}),e.jsx(v,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p().length})]}),e.jsx(_,{className:"h-8 w-8 text-red-600"})]})})})]}),y().length>0&&e.jsxs(r,{className:"mb-6",children:[e.jsx(n,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-blue-600"}),"Top Used Items"]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:y().map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:c+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[t.total_quantity_used," ","units"]}),e.jsx("p",{className:"text-sm text-green-600",children:h(t.total_value)})]})]},t.id))})})]}),p().length>0&&e.jsxs(r,{className:"mb-6 border-red-200 bg-red-50",children:[e.jsx(n,{children:e.jsxs(x,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(_,{className:"h-5 w-5"}),"Low Stock Alert"]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-2",children:p().map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-red-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Current:"," ",t.current_stock," ","| Minimum:"," ",t.minimum_quantity]})]}),e.jsx(m,{variant:"destructive",children:"Low Stock"})]},t.id))})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600"}),"Detailed Usage Report"]})}),e.jsx(l,{children:s&&s.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4",children:"Item Name"}),e.jsx("th",{className:"text-left py-3 px-4",children:"Category"}),e.jsx("th",{className:"text-right py-3 px-4",children:"Quantity Used"}),e.jsx("th",{className:"text-right py-3 px-4",children:"Current Stock"}),e.jsx("th",{className:"text-right py-3 px-4",children:"Total Value"}),e.jsx("th",{className:"text-right py-3 px-4",children:"Treatments"}),e.jsx("th",{className:"text-center py-3 px-4",children:"Status"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["₱",parseFloat(t.unit_price).toLocaleString("en-PH",{minimumFractionDigits:2})," ","per unit"]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(m,{variant:"outline",children:t.category})}),e.jsx("td",{className:"py-3 px-4 text-right font-medium",children:t.total_quantity_used}),e.jsx("td",{className:"py-3 px-4 text-right",children:t.current_stock}),e.jsx("td",{className:"py-3 px-4 text-right font-medium text-green-600",children:h(t.total_value)}),e.jsx("td",{className:"py-3 px-4 text-right",children:t.treatments_count}),e.jsx("td",{className:"py-3 px-4 text-center",children:t.current_stock<=t.minimum_quantity?e.jsx(m,{variant:"destructive",children:"Low Stock"}):e.jsx(m,{variant:"secondary",children:"In Stock"})})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory usage found"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Try adjusting your date range or filters to see inventory usage data."})]})})]})]})})})})]})}export{Ae as default};
