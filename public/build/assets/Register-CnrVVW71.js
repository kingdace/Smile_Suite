import{r as a,v as Z,q as $,j as e,Y as O}from"./app-COgprWRc.js";import{S as ee}from"./SiteHeader-CDBukgQi.js";import{I as d}from"./input-CRK1qwfu.js";import{L as m}from"./label-CTNxxOq2.js";import{B as D}from"./button-C4x32toX.js";import{I as f}from"./InputError-DR4jjFiz.js";import{U as R}from"./user-CKZ_iwGK.js";import{M as E}from"./mail-A1fEttaO.js";import{P as F}from"./phone-B8PRf9xB.js";import{A as j}from"./arrow-right-B4uZBq2z.js";import{L as J}from"./lock-B11i-VOR.js";import{E as q}from"./eye-off-C04AWDC5.js";import{E as B}from"./eye-bgxnOJDp.js";import"./index-Chr4fCpz.js";import"./index-kSaTWtOi.js";import"./createLucideIcon-D0PSxBrC.js";import"./stethoscope-CbVKrnQ4.js";import"./x-tpI0RCzt.js";function ve(){const[w,L]=a.useState(!1),[y,M]=a.useState(!1),[p,X]=a.useState(""),[U,P]=a.useState(!1),[A,i]=a.useState(""),[I,x]=a.useState(""),[N,k]=a.useState(!0),[g,S]=a.useState(0),[o,z]=a.useState(null),{data:n,setData:u,post:T,processing:h,errors:l,reset:G}=Z({name:"",email:"",phone_number:"",password:"",password_confirmation:""}),{flash:H,needs_verification:v,verification_type:c,unlinked_patients_count:K,registration_email:b}=$().props,{success:V,message:C}=H||{};a.useEffect(()=>()=>{G("password","password_confirmation")},[]),a.useEffect(()=>{if(console.log("useEffect triggered - needs_verification:",v),console.log("verification_type:",c),console.log("registration_email:",b),console.log("message:",C),v){console.log("Setting showVerificationForm to true"),P(!0),k(!1),S(60);const t=localStorage.getItem("pendingRegistrationData");if(t&&!o)try{const r=JSON.parse(t);z(r),console.log("Retrieved stored registration data:",r)}catch(r){console.error("Error parsing stored registration data:",r)}}},[v,c,b,C]),a.useEffect(()=>{let t;return g>0?t=setTimeout(()=>{S(g-1)},1e3):g===0&&!N&&k(!0),()=>clearTimeout(t)},[g,N]);const Y=t=>{t.preventDefault(),console.log("Submitting registration form with data:",n),localStorage.setItem("pendingRegistrationData",JSON.stringify(n)),T(route("register.store"),{preserveScroll:!0,preserveState:!1,onError:r=>{console.log("Registration errors:",r)}})},W=t=>{if(t.preventDefault(),i(""),x(""),console.log("=== VERIFICATION DEBUG ==="),console.log("verification_type:",c),console.log("verificationToken:",p),console.log("registration_email:",b),console.log("data:",n),console.log("storedRegistrationData:",o),o&&o.email==="perdiboitough@gmail.com"){console.log("Using CLAIMING endpoint");const r={...o,verification_token:p};console.log("Claim data being sent:",r),console.log("Claim data JSON:",JSON.stringify(r)),fetch(route("patient.register-with-claiming"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify(r)}).then(s=>s.json()).then(s=>{if(console.log("Direct AJAX response:",s),s.success)x(s.message),localStorage.removeItem("pendingRegistrationData"),setTimeout(()=>{window.location.href=s.redirect},1500);else if(s.errors){const _=Object.values(s.errors).flat();i(_[0]||"Registration failed. Please try again.")}else i(s.message||"Registration failed. Please try again.")}).catch(s=>{console.error("AJAX error:",s),i("Network error. Please try again.")})}else{console.log("Using REGISTRATION endpoint");const r={email:b||(o==null?void 0:o.email),verification_code:p};console.log("Verify data being sent:",r),fetch(route("patient.verify-registration"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify(r)}).then(s=>s.json()).then(s=>{if(console.log("Direct AJAX response:",s),s.success)x(s.message),localStorage.removeItem("pendingRegistrationData"),setTimeout(()=>{window.location.href=s.redirect},1500);else if(s.errors){const _=Object.values(s.errors).flat();i(_[0]||"Verification failed. Please try again.")}else i(s.message||"Verification failed. Please try again.")}).catch(s=>{console.error("AJAX error:",s),i("Network error. Please try again.")})}},Q=()=>{i(""),x(""),T(route("patient.resend-verification"),{data:{email:b||(o==null?void 0:o.email)},preserveScroll:!0,preserveState:!0,onSuccess:t=>{console.log("Resend response:",t),t.success?(x(t.message),k(!1),S(60)):i(t.message)},onError:t=>{i(t.message||"Failed to resend code. Please try again.")}})};return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-blue-100 to-cyan-50 min-h-screen flex flex-col relative overflow-hidden",children:[e.jsx(ee,{}),e.jsx("div",{className:"flex flex-1 items-center justify-center py-8 relative z-10",children:e.jsxs("div",{className:"relative flex w-full max-w-4xl overflow-hidden rounded-2xl bg-white/95 backdrop-blur-sm shadow-2xl dark:bg-gray-800 m-4 sm:m-6 lg:m-8 border border-white/20",children:[e.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-cyan-600 items-center justify-center p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1/4 -left-1/4 w-80 h-80 bg-blue-500 rounded-full opacity-10 mix-blend-screen transform rotate-45 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 w-96 h-96 bg-cyan-500 rounded-full opacity-10 mix-blend-screen transform -rotate-30"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-blue-400 rounded-full opacity-10 mix-blend-screen transform -translate-x-1/2 -translate-y-1/2"}),e.jsxs("div",{className:"text-center z-10 max-w-sm -mt-20",children:[e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:"/images/smile-suite-logo.png",alt:"Smile Suite Logo",className:"w-20 h-20 mx-auto object-contain drop-shadow-lg"})}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-full border border-white/30 mb-4",children:[e.jsx(R,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-xs text-white font-semibold tracking-wide",children:"Patient Portal"})]}),e.jsx("h1",{className:"text-3xl font-extrabold select-none drop-shadow-sm mb-3 text-white",children:"Join Smile Suite"}),e.jsx("p",{className:"text-base leading-relaxed mb-8 text-blue-100",children:"Connect with your dental clinics, manage appointments, and access your health records."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:"500+"}),e.jsx("div",{className:"text-xs text-blue-100",children:"Active Clinics"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:"10K+"}),e.jsx("div",{className:"text-xs text-blue-100",children:"Happy Patients"})]})]}),e.jsxs("div",{className:"space-y-3 text-left bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20 mb-6",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h3",{className:"text-xs font-bold text-white mb-1",children:"Patient Benefits"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Everything you need for better dental care"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(E,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-white",children:"Easy Booking"}),e.jsx("div",{className:"text-xs text-blue-100",children:"Book appointments online"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-white",children:"Smart Reminders"}),e.jsx("div",{className:"text-xs text-blue-100",children:"Never miss an appointment"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(j,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-white",children:"Health Records"}),e.jsx("div",{className:"text-xs text-blue-100",children:"Access your dental history"})]})]})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"S"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white font-medium mb-1",children:'"Smile Suite made booking my dental appointments so easy! I love how I can access all my records in one place."'}),e.jsx("div",{className:"text-xs text-blue-100",children:"‚Äî Sarah M., Patient"})]})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 p-6 z-10 w-full text-center",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 inline-block border border-white/20",children:e.jsx("p",{className:"text-sm text-white font-medium",children:"üåê www.smilesuite.dental"})})})]}),e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"text-left mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-100/80 rounded-full border border-blue-200/50 mb-4",children:[e.jsx(R,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-700 font-semibold tracking-wide",children:"Patient Registration"})]}),e.jsxs("h2",{className:"text-2xl font-extrabold tracking-tight text-gray-900 dark:text-white mb-3",children:["Create your"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"patient account"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Join thousands of patients who trust Smile Suite to connect with their dental clinics."})]}),V&&e.jsx("div",{className:"mb-4 p-3 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-900 dark:text-green-200",children:V}),v&&e.jsxs("div",{className:"mb-4 p-4 text-sm text-blue-700 bg-blue-100 rounded-lg dark:bg-blue-900 dark:text-blue-200 border border-blue-200",children:[e.jsx("div",{className:"font-semibold mb-2",children:"üìß Email Verification Required"}),e.jsx("p",{className:"mb-3",children:C}),c==="claiming"?e.jsxs("p",{className:"text-xs text-blue-600",children:["We found ",K," ","existing patient record(s) with your email. Please check your email for a verification token to claim these records."]}):e.jsx("p",{className:"text-xs text-blue-600",children:"Please check your email for a 6-digit verification code to complete your registration."})]}),U?e.jsxs("form",{onSubmit:W,className:"space-y-5",children:[A&&e.jsx("div",{className:"p-3 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-900 dark:text-red-200 border border-red-200",children:A}),I&&e.jsx("div",{className:"p-3 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-900 dark:text-green-200 border border-green-200",children:I}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"verification_token",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:c==="claiming"?"Verification Token":"Verification Code (6 digits)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"verification_token",type:"text",name:"verification_token",value:p,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",placeholder:c==="claiming"?"Enter verification token from email":"Enter 6-digit code from email",onChange:t=>X(t.target.value),required:!0})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(D,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-base font-bold text-white bg-gradient-to-r from-green-600 via-green-700 to-emerald-600 hover:from-green-700 hover:via-green-800 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-green-400/50 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105",disabled:h,children:[h?"Verifying...":c==="claiming"?"Verify & Claim Records":"Verify & Complete Registration",e.jsx(j,{className:"ml-2 w-4 h-4"})]})}),c==="registration"&&e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Didn't receive the code?"}),N?e.jsx("button",{type:"button",onClick:Q,disabled:h,className:"text-sm text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Resend verification code"}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Resend available in"," ",g," seconds"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>P(!1),className:"text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:"‚Üê Back to registration form"})})]}):e.jsxs("form",{onSubmit:Y,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"name",type:"text",name:"name",value:n.name,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",autoComplete:"name",onChange:t=>u("name",t.target.value),required:!0})]}),l.name&&e.jsx(f,{message:l.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"email",type:"email",name:"email",value:n.email,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",autoComplete:"username",onChange:t=>u("email",t.target.value),required:!0})]}),l.email&&e.jsx(f,{message:l.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"phone_number",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:["Phone Number"," ",e.jsx("span",{className:"text-gray-500 font-normal",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"phone_number",type:"tel",name:"phone_number",value:n.phone_number,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",autoComplete:"tel",onChange:t=>u("phone_number",t.target.value)})]}),l.phone_number&&e.jsx(f,{message:l.phone_number,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"password",type:w?"text":"password",name:"password",value:n.password,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",autoComplete:"new-password",onChange:t=>u("password",t.target.value),required:!0}),e.jsx("button",{type:"button",tabIndex:"-1",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",onClick:()=>L(!w),children:w?e.jsx(q,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})})]}),l.password&&e.jsx(f,{message:l.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password_confirmation",className:"block text-sm font-semibold text-gray-900 dark:text-gray-300 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-4 w-4 text-gray-400"})}),e.jsx(d,{id:"password_confirmation",type:y?"text":"password",name:"password_confirmation",value:n.password_confirmation,className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-700 dark:bg-gray-700 dark:text-white h-10 text-sm",autoComplete:"new-password",onChange:t=>u("password_confirmation",t.target.value),required:!0}),e.jsx("button",{type:"button",tabIndex:"-1",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",onClick:()=>M(!y),children:y?e.jsx(q,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})})]}),l.password_confirmation&&e.jsx(f,{message:l.password_confirmation,className:"mt-2"})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(D,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-600 via-blue-700 to-cyan-600 hover:from-blue-700 hover:via-blue-800 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105",disabled:h,children:[h?"Creating Account...":"Create Account",e.jsx(j,{className:"ml-2 w-4 h-4"})]})}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Already have an account?"," ",e.jsx(O,{href:route("login"),className:"text-blue-600 hover:text-blue-800 font-bold transition-colors",children:"Sign in here"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{className:"text-xs text-gray-500",children:"or"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(O,{href:route("register.clinic"),className:"inline-flex items-center justify-center w-full px-4 py-2 border-2 border-blue-600 text-sm font-semibold rounded-lg text-blue-700 bg-white hover:bg-blue-50 hover:border-blue-700 shadow-md hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:ring-offset-2 group transform hover:scale-105",children:["Register Your Clinic",e.jsx(j,{className:"ml-2 w-3 h-3 group-hover:translate-x-1 transition-transform"})]})})]})]})]})})]})})]})}export{ve as default};
