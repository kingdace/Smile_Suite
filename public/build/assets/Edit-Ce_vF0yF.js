import{r as E,j as s,$ as z,v as W,Y as Z,m as ss}from"./app-BytpB0TX.js";import{A as $}from"./AuthenticatedLayout-Br1RgKPG.js";import{C as es,a as is,b as as,c as ls}from"./card-DvBlHsWB.js";import{I as h}from"./input-b_mCR-wU.js";import{L as c}from"./label-BHkS7Oac.js";import{B as m}from"./button-CtZjCLMA.js";import{I as r}from"./InputError-BlpO9tGX.js";import{T as u}from"./textarea-BkHvqQVB.js";import{S as g,a as j,b as _,c as v,d as p}from"./select-BzAtUc1W.js";import{a as D}from"./index-Bce1V77q.js";import{T as ns}from"./TreatmentInventorySelector-CdlkkYkS.js";import{P as T,a as k,b as A}from"./popover-BtPniz4C.js";import"./separator-B73y2ybe.js";import{L as M}from"./loader-circle-CkDTXvo7.js";import{F as os}from"./file-text-w_JrWozr.js";import{U as ts}from"./users-aYUpDrTW.js";import{C as U}from"./calendar-P5cjB2ud.js";import{A as ds}from"./activity-CKRxlT-Y.js";import{C as cs}from"./circle-DOueGHQx.js";import{X as N}from"./x-DJBYx-Hm.js";import{C as y}from"./circle-plus-DXTQ1D8M.js";import{P as rs}from"./pill-Cd5FdXrq.js";import{P as ms}from"./scissors-C29IvCgD.js";import{C as ps}from"./clipboard-plus-Bxo8TVgh.js";import{I as xs}from"./image-s_VtKmdj.js";import{C as hs}from"./clipboard-list-BWySuQBB.js";import{C as us}from"./credit-card-CdU_J4V0.js";import{f as C}from"./format-CYZdy3_o.js";import"./ImageHelper-C4-MHkIR.js";import"./layout-dashboard-ByTGW_ks.js";import"./createLucideIcon-C9b6KVSr.js";import"./clock-CUTjCDfl.js";import"./stethoscope-CCt4NXon.js";import"./dollar-sign-CmdQIFbL.js";import"./chevron-right-oO7w1t3Q.js";import"./shield-D89UShmd.js";import"./trending-up-CRC8Tg-S.js";import"./circle-alert-BxqCbx5A.js";import"./SiteHeader-DkRsR5Bc.js";import"./index-nt-_yeOj.js";import"./user-DeoVP0od.js";import"./crown-CVYMErPk.js";import"./zap-BIRerbYh.js";import"./circle-check-big-CeOvxPJm.js";import"./info-BnjbGvLN.js";import"./circle-x-CRU1fK1E.js";import"./building-2-JMpJ8PR2.js";import"./triangle-alert-D2inJjwx.js";import"./index-DF-QO9u9.js";import"./index-C45Zy3CK.js";import"./index-Bj6BLWTC.js";import"./badge-Df2sRIfB.js";import"./plus-Do73e_3H.js";import"./hash-BjikHPbe.js";function b(){return null}function fe({auth:f,treatment:i,patients:q,dentists:B,services:L,appointments:H=[]}){var O,V,R;const[gs,js]=E.useState(!1),[_s,vs]=E.useState(!1);if(!i)return s.jsxs($,{auth:f,isClinicPage:!0,header:s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Loading Treatment..."}),children:[s.jsx(z,{title:"Loading Treatment..."}),s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{children:"Loading treatment data..."})]})})})})]});const{data:l,setData:o,put:Y,processing:S,errors:d}=W({patient_id:((O=i==null?void 0:i.patient_id)==null?void 0:O.toString())||"",dentist_id:((V=i==null?void 0:i.user_id)==null?void 0:V.toString())||"",service_id:i!=null&&i.service_id?i.service_id.toString():"none",name:(i==null?void 0:i.name)||"",description:(i==null?void 0:i.description)||"",cost:(i==null?void 0:i.cost)||"",status:(i==null?void 0:i.status)||"scheduled",start_date:i!=null&&i.start_date?new Date(i.start_date):void 0,end_date:i!=null&&i.end_date?new Date(i.end_date):void 0,notes:(i==null?void 0:i.notes)||"",diagnosis:(i==null?void 0:i.diagnosis)||"",recommendations:(i==null?void 0:i.recommendations)||"",tooth_numbers:(i==null?void 0:i.tooth_numbers)||[],prescriptions:(i==null?void 0:i.prescriptions)||[],follow_up_notes:(i==null?void 0:i.follow_up_notes)||"",materials_used:(i==null?void 0:i.materials_used)||[],insurance_info:(i==null?void 0:i.insurance_info)||[],payment_status:(i==null?void 0:i.payment_status)||"pending",vital_signs:(i==null?void 0:i.vital_signs)||[],allergies:(i==null?void 0:i.allergies)||"",medical_history:(i==null?void 0:i.medical_history)||"",consent_forms:(i==null?void 0:i.consent_forms)||[],treatment_phase:(i==null?void 0:i.treatment_phase)||"no_phase",outcome:(i==null?void 0:i.outcome)||"no_outcome",next_appointment_date:i!=null&&i.next_appointment_date?new Date(i.next_appointment_date):void 0,estimated_duration_minutes:(i==null?void 0:i.estimated_duration_minutes)||"",appointment_id:i!=null&&i.appointment_id?i.appointment_id.toString():"no_appointment",procedures_details:(()=>{const e=i==null?void 0:i.procedures_details;if(!e)return[];if(Array.isArray(e))return e.map(a=>{if(typeof a=="object"&&a!==null&&(a.step!==void 0||a.notes!==void 0))return{step:a.step||"",notes:a.notes||""};if(typeof a=="object"&&a!==null){const t=Object.keys(a);if(t.length>0&&t.every(n=>!isNaN(n))){const n=Object.values(a);return{step:String(n[0]||""),notes:String(n[1]||"")}}}return{step:String(a),notes:""}});if(typeof e=="object"&&e!==null){const a=Object.keys(e);if(a.length>0&&a.every(t=>!isNaN(t)))return Object.values(e).map(n=>{if(typeof n=="object"&&n!==null){const x=Object.keys(n);if(x.length>0&&x.every(w=>!isNaN(w))){const w=Object.values(n);return{step:String(w[0]||""),notes:String(w[1]||"")}}return{step:n.step||n.name||n.description||"",notes:n.notes||n.details||""}}return{step:String(n),notes:""}})}return[]})(),images:(i==null?void 0:i.images)||[],imageFiles:[],inventory_items:((R=i==null?void 0:i.inventoryItems)==null?void 0:R.map(e=>{var a,t;return{inventory_id:e.inventory_id,quantity_used:e.quantity_used,unit_cost:e.unit_cost,total_cost:e.total_cost,notes:e.notes||"",inventory_name:((a=e.inventory)==null?void 0:a.name)||"Unknown Item (Deleted)",inventory_description:((t=e.inventory)==null?void 0:t.description)||"This inventory item may have been deleted or renamed"}}))||[]}),J=[{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],K=[{value:"pending",label:"Pending"},{value:"partial",label:"Partial"},{value:"completed",label:"Completed"}],X=[{value:"initial",label:"Initial"},{value:"treatment",label:"Treatment"},{value:"follow_up",label:"Follow-up"},{value:"maintenance",label:"Maintenance"}],G=[{value:"successful",label:"Successful"},{value:"partial",label:"Partial"},{value:"failed",label:"Failed"},{value:"pending",label:"Pending"}],Q=e=>{e.preventDefault(),console.log("Edit page - Submitting form with data:",l),console.log("Edit page - inventory_items being sent:",l.inventory_items);const a={...l};a.start_date instanceof Date&&(a.start_date=a.start_date.toISOString()),a.end_date instanceof Date&&(a.end_date=a.end_date.toISOString()),a.next_appointment_date instanceof Date&&(a.next_appointment_date=a.next_appointment_date.toISOString()),a.cost&&(a.cost=parseFloat(a.cost)),a.estimated_duration_minutes&&(a.estimated_duration_minutes=parseInt(a.estimated_duration_minutes)),a.patient_id&&(a.patient_id=parseInt(a.patient_id)),a.dentist_id&&(a.dentist_id=parseInt(a.dentist_id)),a.service_id&&a.service_id!=="none"?a.service_id=parseInt(a.service_id):a.service_id==="none"&&(a.service_id=null),a.appointment_id&&a.appointment_id!=="no_appointment"?a.appointment_id=parseInt(a.appointment_id):a.appointment_id==="no_appointment"&&(a.appointment_id=null),delete a.imageFiles,console.log("Edit page - Processed data for submission:",a),console.log("Edit page - Treatment ID:",i==null?void 0:i.id),console.log("Edit page - Clinic ID:",f.clinic_id);const t=route("clinic.treatments.update",{clinic:f.clinic_id,treatment:i==null?void 0:i.id});console.log("Edit page - Route URL:",t),Y(t,{data:a,onError:n=>{console.error("Edit page - Update failed with errors:",n),alert("Update failed: "+JSON.stringify(n))},onSuccess:n=>{console.log("Edit page - Update successful:",n),alert("Treatment updated successfully!"),ss.visit(route("clinic.treatments.show",{clinic:f.clinic_id,treatment:i==null?void 0:i.id}))},onFinish:()=>{console.log("Edit page - Request finished")}})},P=e=>{o(e,[...l[e],""])},I=(e,a,t)=>{const n=[...l[e]];n[a]=t,o(e,n)},F=(e,a)=>{const t=l[e].filter((n,x)=>x!==a);o(e,t)};return E.useEffect(()=>{},[i,l.inventory_items]),s.jsxs($,{auth:f,isClinicPage:!0,header:s.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Edit Treatment: ",(i==null?void 0:i.name)||"Loading..."]}),children:[s.jsx(z,{title:`Edit Treatment: ${(i==null?void 0:i.name)||"Loading..."}`}),s.jsx("div",{className:"py-4",children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsx(es,{className:"bg-white shadow-lg rounded-xl border-0",children:s.jsxs("form",{onSubmit:Q,className:"space-y-8",children:[s.jsx(is,{className:"px-6 py-4 border-b bg-gradient-to-r from-blue-200 via-blue-300 to-indigo-300 rounded-t-xl",children:s.jsx(as,{className:"text-xl font-semibold text-gray-900",children:"Edit Treatment"})}),s.jsxs(ls,{className:"px-6 pb-6 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-blue-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"name",children:"Treatment Name"}),s.jsx(h,{id:"name",value:l.name,onChange:e=>o("name",e.target.value),className:"mt-1"}),s.jsx(r,{message:d.name,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"service_id",children:"Service"}),s.jsxs(g,{onValueChange:e=>{if(o("service_id",e),e&&e!=="none"){const a=L.find(t=>t.id.toString()===e);a&&(o("cost",a.price||""),o("estimated_duration_minutes",a.duration_minutes||""))}},value:l.service_id,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select a service"})}),s.jsxs(v,{children:[s.jsx(p,{value:"none",children:"No Service Selected"}),L.map(e=>s.jsx(p,{value:e.id.toString(),children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:e.name}),s.jsxs("span",{className:"text-sm text-gray-500",children:[e.category," ","• ₱",e.price," ","•"," ",e.duration_minutes,"min"]})]})},e.id))]})]}),s.jsx(r,{message:d.service_id,className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"description",children:"Description"}),s.jsx(u,{id:"description",value:l.description,onChange:e=>o("description",e.target.value),className:"mt-1",rows:4}),s.jsx(r,{message:d.description,className:"mt-2"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"cost",children:"Cost (₱)"}),s.jsx(h,{id:"cost",type:"number",step:"0.01",min:"0",value:l.cost,onChange:e=>o("cost",e.target.value),className:"mt-1"}),s.jsx(r,{message:d.cost,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"estimated_duration_minutes",children:"Duration (minutes)"}),s.jsx(h,{id:"estimated_duration_minutes",type:"number",min:"1",value:l.estimated_duration_minutes,onChange:e=>o("estimated_duration_minutes",e.target.value),className:"mt-1"}),s.jsx(r,{message:d.estimated_duration_minutes,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"status",children:"Status"}),s.jsxs(g,{onValueChange:e=>o("status",e),value:l.status,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{})}),s.jsx(v,{children:J.map(e=>s.jsx(p,{value:e.value,children:e.label},e.value))})]}),s.jsx(r,{message:d.status,className:"mt-2"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(ts,{className:"h-5 w-5 text-blue-600"}),"Patient & Dentist Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"patient_id",children:"Patient"}),s.jsxs(g,{onValueChange:e=>o("patient_id",e),value:l.patient_id,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select a patient"})}),s.jsx(v,{children:(q||[]).map(e=>{var a;return s.jsx(p,{value:e.id.toString(),children:((a=e.user)==null?void 0:a.name)||`${e.first_name||""} ${e.last_name||""}`.trim()||"Unknown Patient"},e.id)})})]}),s.jsx(r,{message:d.patient_id,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"dentist_id",children:"Dentist"}),s.jsxs(g,{onValueChange:e=>o("dentist_id",e),value:l.dentist_id,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select a dentist"})}),s.jsx(v,{children:(B||[]).map(e=>s.jsx(p,{value:e.id.toString(),children:e.name||"Unknown Dentist"},e.id))})]}),s.jsx(r,{message:d.dentist_id,className:"mt-2"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5 text-blue-600"}),"Related Appointment"]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"appointment_id",children:"Appointment"}),s.jsxs(g,{onValueChange:e=>o("appointment_id",e),value:l.appointment_id,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select an appointment"})}),s.jsxs(v,{children:[s.jsx(p,{value:"no_appointment",children:"No Appointment"}),(H||[]).map(e=>{var a;return s.jsxs(p,{value:e.id.toString(),children:[C(new Date(e.scheduled_at),"PPP")," ","-"," ",((a=e.patient)==null?void 0:a.name)||"Unknown Patient"," ","(",e.type||"Unknown Type",")"]},e.id)})]})]}),s.jsx(r,{message:d.appointment_id,className:"mt-2"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5 text-blue-600"}),"Scheduling"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{children:"Start Date"}),s.jsxs(T,{children:[s.jsx(k,{asChild:!0,children:s.jsxs(m,{variant:"outline",className:D("w-full justify-start text-left font-normal mt-1",!l.start_date&&"text-muted-foreground"),children:[s.jsx(U,{className:"mr-2 h-4 w-4"}),l.start_date?C(l.start_date,"PPP"):"Pick a date"]})}),s.jsx(A,{className:"w-auto p-0",children:s.jsx(b,{mode:"single",selected:l.start_date,onSelect:e=>o("start_date",e),initialFocus:!0})})]}),s.jsx(r,{message:d.start_date,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{children:"End Date"}),s.jsxs(T,{children:[s.jsx(k,{asChild:!0,children:s.jsxs(m,{variant:"outline",className:D("w-full justify-start text-left font-normal mt-1",!l.end_date&&"text-muted-foreground"),children:[s.jsx(U,{className:"mr-2 h-4 w-4"}),l.end_date?C(l.end_date,"PPP"):"Pick a date"]})}),s.jsx(A,{className:"w-auto p-0",children:s.jsx(b,{mode:"single",selected:l.end_date,onSelect:e=>o("end_date",e),initialFocus:!0})})]}),s.jsx(r,{message:d.end_date,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{children:"Next Appointment Date"}),s.jsxs(T,{children:[s.jsx(k,{asChild:!0,children:s.jsxs(m,{variant:"outline",className:D("w-full justify-start text-left font-normal mt-1",!l.next_appointment_date&&"text-muted-foreground"),children:[s.jsx(U,{className:"mr-2 h-4 w-4"}),l.next_appointment_date?C(l.next_appointment_date,"PPP"):"Pick a date"]})}),s.jsx(A,{className:"w-auto p-0",children:s.jsx(b,{mode:"single",selected:l.next_appointment_date,onSelect:e=>o("next_appointment_date",e),initialFocus:!0})})]}),s.jsx(r,{message:d.next_appointment_date,className:"mt-2"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(ds,{className:"h-5 w-5 text-blue-600"}),"Clinical Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"diagnosis",children:"Diagnosis"}),s.jsx(u,{id:"diagnosis",value:l.diagnosis,onChange:e=>o("diagnosis",e.target.value),className:"mt-1",rows:3,placeholder:"Enter diagnosis details..."}),s.jsx(r,{message:d.diagnosis,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"allergies",children:"Allergies"}),s.jsx(u,{id:"allergies",value:l.allergies,onChange:e=>o("allergies",e.target.value),className:"mt-1",rows:3,placeholder:"Enter patient allergies..."}),s.jsx(r,{message:d.allergies,className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"medical_history",children:"Medical History"}),s.jsx(u,{id:"medical_history",value:l.medical_history,onChange:e=>o("medical_history",e.target.value),className:"mt-1",rows:3,placeholder:"Enter relevant medical history..."}),s.jsx(r,{message:d.medical_history,className:"mt-2"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"treatment_phase",children:"Treatment Phase"}),s.jsxs(g,{onValueChange:e=>o("treatment_phase",e),value:l.treatment_phase,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select phase"})}),s.jsxs(v,{children:[s.jsx(p,{value:"no_phase",children:"No Phase"}),X.map(e=>s.jsx(p,{value:e.value,children:e.label},e.value))]})]}),s.jsx(r,{message:d.treatment_phase,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"outcome",children:"Outcome"}),s.jsxs(g,{onValueChange:e=>o("outcome",e),value:l.outcome,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{placeholder:"Select outcome"})}),s.jsxs(v,{children:[s.jsx(p,{value:"no_outcome",children:"No Outcome"}),G.map(e=>s.jsx(p,{value:e.value,children:e.label},e.value))]})]}),s.jsx(r,{message:d.outcome,className:"mt-2"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(cs,{className:"h-5 w-5 text-blue-600"}),"Teeth Involved"]}),s.jsxs("div",{className:"space-y-3",children:[(l.tooth_numbers||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(h,{value:e,onChange:t=>I("tooth_numbers",a,t.target.value),placeholder:"e.g., 12, 13, 14",className:"flex-1"}),s.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>F("tooth_numbers",a),children:s.jsx(N,{className:"h-4 w-4"})})]},a)),s.jsxs(m,{type:"button",variant:"outline",onClick:()=>P("tooth_numbers"),className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Add Tooth Number"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(rs,{className:"h-5 w-5 text-blue-600"}),"Prescriptions"]}),s.jsxs("div",{className:"space-y-3",children:[(l.prescriptions||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(h,{value:e,onChange:t=>I("prescriptions",a,t.target.value),placeholder:"Enter prescription details...",className:"flex-1"}),s.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>F("prescriptions",a),children:s.jsx(N,{className:"h-4 w-4"})})]},a)),s.jsxs(m,{type:"button",variant:"outline",onClick:()=>P("prescriptions"),className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Add Prescription"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(ms,{className:"h-5 w-5 text-blue-600"}),"Materials Used"]}),s.jsxs("div",{className:"space-y-3",children:[(l.materials_used||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(h,{value:e,onChange:t=>I("materials_used",a,t.target.value),placeholder:"Enter material details...",className:"flex-1"}),s.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>F("materials_used",a),children:s.jsx(N,{className:"h-4 w-4"})})]},a)),s.jsxs(m,{type:"button",variant:"outline",onClick:()=>P("materials_used"),className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Add Material"]})]})]}),s.jsx("div",{className:"space-y-6 -mx-8 px-8 py-8 bg-gradient-to-r from-white-50 to-indigo-50 border-y border-blue-100",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx(ns,{clinicId:f.clinic_id,value:l.inventory_items,onChange:e=>o("inventory_items",e),disabled:S,showCosts:!0})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(ps,{className:"h-5 w-5 text-blue-600"}),"Procedures Details"]}),s.jsxs("div",{className:"space-y-4",children:[(l.procedures_details||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(h,{value:e.step||"",onChange:t=>{const n=[...l.procedures_details];n[a].step=t.target.value,o("procedures_details",n)},placeholder:`Step ${a+1}`,className:"flex-1"}),s.jsx(u,{value:e.notes||"",onChange:t=>{const n=[...l.procedures_details];n[a].notes=t.target.value,o("procedures_details",n)},placeholder:"Detailed notes for this step",rows:"3",className:"w-full"})]}),s.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=l.procedures_details.filter((n,x)=>x!==a);o("procedures_details",t)},children:s.jsx(N,{className:"h-4 w-4"})})]},a)),s.jsxs(m,{type:"button",variant:"outline",onClick:()=>o("procedures_details",[...l.procedures_details,{step:"",notes:""}]),className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Add Procedure Step"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(xs,{className:"h-5 w-5 text-blue-600"}),"Treatment Images"]}),s.jsxs("div",{className:"space-y-3",children:[(l.images||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(h,{value:e,onChange:t=>{const n=[...l.images];n[a]=t.target.value,o("images",n)},placeholder:"Enter image URL",className:"flex-1"}),s.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=l.images.filter((n,x)=>x!==a);o("images",t)},children:s.jsx(N,{className:"h-4 w-4"})})]},a)),s.jsxs(m,{type:"button",variant:"outline",onClick:()=>o("images",[...l.images,""]),className:"flex items-center gap-2",children:[s.jsx(y,{className:"h-4 w-4"}),"Add Image URL"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(hs,{className:"h-5 w-5 text-blue-600"}),"Notes & Recommendations"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(c,{htmlFor:"notes",children:"Notes"}),s.jsx(u,{id:"notes",value:l.notes,onChange:e=>o("notes",e.target.value),className:"mt-1",rows:4,placeholder:"Enter treatment notes..."}),s.jsx(r,{message:d.notes,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"recommendations",children:"Recommendations"}),s.jsx(u,{id:"recommendations",value:l.recommendations,onChange:e=>o("recommendations",e.target.value),className:"mt-1",rows:4,placeholder:"Enter post-treatment recommendations..."}),s.jsx(r,{message:d.recommendations,className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(c,{htmlFor:"follow_up_notes",children:"Follow-up Notes"}),s.jsx(u,{id:"follow_up_notes",value:l.follow_up_notes,onChange:e=>o("follow_up_notes",e.target.value),className:"mt-1",rows:3,placeholder:"Enter follow-up instructions..."}),s.jsx(r,{message:d.follow_up_notes,className:"mt-2"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(us,{className:"h-5 w-5 text-blue-600"}),"Payment & Status"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{children:[s.jsx(c,{htmlFor:"payment_status",children:"Payment Status"}),s.jsxs(g,{onValueChange:e=>o("payment_status",e),value:l.payment_status,children:[s.jsx(j,{className:"mt-1",children:s.jsx(_,{})}),s.jsx(v,{children:K.map(e=>s.jsx(p,{value:e.value,children:e.label},e.value))})]}),s.jsx(r,{message:d.payment_status,className:"mt-2"})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[s.jsx(Z,{href:route("clinic.treatments.show",{clinic:f.clinic_id,treatment:i==null?void 0:i.id}),children:s.jsx(m,{variant:"outline",size:"sm",children:"Cancel"})}),s.jsxs(m,{type:"submit",disabled:S,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[S&&s.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Treatment"]})]})]})]})})})})]})}export{fe as default};
