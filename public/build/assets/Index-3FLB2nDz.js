import{r as n,R as q,j as e,$ as Se,m as ee,a as Ae}from"./app-BWxQYrX6.js";import{A as Pe,a as g,B as Te,D as se,b as te,c as ae,d as re,e as le}from"./AuthenticatedLayout-qAPAn_x5.js";import{C as v,c as w}from"./card-CsaC10C3.js";import{B as u}from"./badge-D2HCse-l.js";import{B as i}from"./button-CPcSBPFh.js";import{I as ke}from"./input--euKJla3.js";import{L as I}from"./label-BqJOMct_.js";import{T as ne}from"./textarea-um13KWzU.js";import{B as b}from"./building-2-BAoYD3sH.js";import{R as E}from"./refresh-cw-5TTpOVNa.js";import{C as De}from"./chart-column-Cx-aOs8P.js";import{C as k}from"./clock-Dg12Dfp2.js";import{C as _}from"./crown-C_VyokGJ.js";import{S as Re}from"./search-CecFmK67.js";import{T as L}from"./target-BGyd0Ouq.js";import{D as j}from"./dollar-sign-JaFWOl8x.js";import{A as ie}from"./activity-8H58gHi2.js";import{E as Ue}from"./eye-D1o4inAJ.js";import{C as D}from"./circle-check-big-3-_3u0jr.js";import{C as xe}from"./circle-x-Dfm_zbyn.js";import{M as Ie}from"./mail-C2vdCiWm.js";import{C as ce}from"./calendar-D24UCPWo.js";import{C as de}from"./credit-card-B3YwFrA9.js";import{H as z}from"./hash-CnGUspt8.js";import{U as Le}from"./user-oEMFmpBd.js";import{P as ze}from"./phone-DjsRuPLj.js";import{F as Ee}from"./file-text-CdUJ8PC7.js";import"./index-BGZbWSET.js";import"./layout-dashboard-B7xWly84.js";import"./createLucideIcon-C-SF-e7E.js";import"./users-D28d9V-z.js";import"./stethoscope-BePhj6bx.js";import"./scissors-Dqps4-NJ.js";import"./chevron-right-B6CR-LxY.js";import"./shield-Du_-C_3t.js";import"./trending-up-CcwnyvAK.js";import"./circle-alert-C9uAGIcv.js";import"./loader-circle-C0rYjyGN.js";import"./SiteHeader-BIRnvd5N.js";import"./index-C8s1n2oo.js";import"./x-D5TWC7ZM.js";import"./zap-B57EPhTQ.js";import"./info-yq3WN-vu.js";import"./triangle-alert-OBXn1-EQ.js";const oe={pending:"bg-yellow-50 text-yellow-700 border-yellow-200",approved:"bg-blue-50 text-blue-700 border-blue-200",payment_received:"bg-purple-50 text-purple-700 border-purple-200",rejected:"bg-red-50 text-red-700 border-red-200",completed:"bg-green-50 text-green-700 border-green-200"},Fe={pending:k,approved:D,payment_received:j,rejected:xe,completed:D},me={upgrade:"bg-purple-50 text-purple-700 border-purple-200",renewal:"bg-blue-50 text-blue-700 border-blue-200"},Oe={upgrade:_,renewal:E};function Ls({auth:pe,requests:he=[],stats:c={}}){var X,G,K,W,Z;const[F,O]=n.useState(!1),[B,Be]=n.useState(!1),[f,ge]=n.useState(""),[C,ue]=n.useState("all"),[S,be]=n.useState("all"),[A,$e]=n.useState("created_at"),[$,Me]=n.useState("desc"),[Ve,He]=n.useState(new Set),[je,P]=n.useState(!1),[a,fe]=n.useState(null),[l,Ne]=n.useState(null),[p,R]=n.useState({calculated_amount:"",admin_notes:"",payment_verification_notes:""}),[ye,M]=n.useState(!1),[t,ve]=n.useState(null),[o,m]=n.useState(1),[N,we]=n.useState(10),V=(he||[]).filter(s=>{const r=s.clinic.name.toLowerCase().includes(f.toLowerCase())||s.clinic.email.toLowerCase().includes(f.toLowerCase())||s.request_type.toLowerCase().includes(f.toLowerCase()),d=C==="all"||s.status===C,x=S==="all"||s.request_type===S;return r&&d&&x}).sort((s,r)=>{let d=s[A],x=r[A];return A==="clinic.name"&&(d=s.clinic.name,x=r.clinic.name),$==="asc"?d>x?1:-1:d<x?1:-1}),y=V.length,h=Math.ceil(y/N),U=(o-1)*N,H=U+N,Q=V.slice(U,H);q.useEffect(()=>{m(1)},[f,C,S,A,$,N]);const T=async(s,r)=>{fe(s),Ne(r),R({calculated_amount:s.calculated_amount||"",admin_notes:"",payment_verification_notes:""}),P(!0)},_e=async()=>{if(!(!a||!l)){O(!0);try{let s,r=p;l==="verify-payment"?(s=route("admin.subscription-requests.verify-payment",a.id),r={payment_verification_notes:p.payment_verification_notes}):s=route(`admin.subscription-requests.${l}`,a.id);const d=await Ae.post(s,r);d.data.success?(P(!1),ee.reload()):alert("Error: "+d.data.message)}catch(s){console.error("Action failed:",s),alert("Action failed. Please try again.")}finally{O(!1)}}},Ce=s=>{ve(s),M(!0)},Y=s=>{const r=Fe[s];return r?e.jsx(r,{className:"w-4 h-4"}):null},J=s=>{const r=Oe[s];return r?e.jsx(r,{className:"w-4 h-4"}):null};return e.jsxs(Pe,{auth:pe,children:[e.jsx(Se,{title:"Subscription Requests"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-700 bg-clip-text text-transparent",children:"Subscription Requests"}),e.jsx("p",{className:"text-blue-600 text-base font-medium mt-1",children:"Manage upgrade and renewal requests from clinics"})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(i,{onClick:()=>ee.reload(),disabled:B,size:"default",className:"bg-white text-blue-600 border-2 border-blue-200 hover:bg-blue-50 hover:border-blue-300 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(E,{className:`w-4 h-4 mr-2 ${B?"animate-spin":""}`}),"Refresh"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(v,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl overflow-hidden",children:e.jsxs(w,{className:"p-4 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(De,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white text-opacity-80 text-xs font-medium",children:"Total Requests"})})]}),e.jsx("p",{className:"text-3xl font-bold text-white mb-2",children:(c==null?void 0:c.total)||0}),e.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-white h-1.5 rounded-full",style:{width:"100%"}})})]})]})}),e.jsx(v,{className:"border-0 shadow-lg bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl overflow-hidden",children:e.jsxs(w,{className:"p-4 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white text-opacity-80 text-xs font-medium",children:"Pending"})})]}),e.jsx("p",{className:"text-3xl font-bold text-white mb-2",children:(c==null?void 0:c.pending)||0}),e.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-white h-1.5 rounded-full",style:{width:"100%"}})})]})]})}),e.jsx(v,{className:"border-0 shadow-lg bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl overflow-hidden",children:e.jsxs(w,{className:"p-4 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white text-opacity-80 text-xs font-medium",children:"Upgrades"})})]}),e.jsx("p",{className:"text-3xl font-bold text-white mb-2",children:(c==null?void 0:c.upgrades)||0}),e.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-white h-1.5 rounded-full",style:{width:"100%"}})})]})]})}),e.jsx(v,{className:"border-0 shadow-lg bg-gradient-to-br from-cyan-500 to-blue-500 rounded-xl overflow-hidden",children:e.jsxs(w,{className:"p-4 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white text-opacity-80 text-xs font-medium",children:"Renewals"})})]}),e.jsx("p",{className:"text-3xl font-bold text-white mb-2",children:(c==null?void 0:c.renewals)||0}),e.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-white h-1.5 rounded-full",style:{width:"100%"}})})]})]})})]}),e.jsx(v,{className:"border-0 shadow-lg bg-white mb-6 rounded-xl",children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:e.jsx(Re,{className:"w-4 h-4 text-blue-600"})})}),e.jsx(ke,{placeholder:"Search by clinic name, email, or request type...",value:f,onChange:s=>ge(s.target.value),className:"pl-12 pr-4 py-3 text-base border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 rounded-lg bg-gray-50 focus:bg-white transition-all duration-200"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:C,onChange:s=>ue(s.target.value),className:"appearance-none px-4 py-3 pr-10 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200 text-base font-medium",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:S,onChange:s=>be(s.target.value),className:"appearance-none px-4 py-3 pr-10 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200 text-base font-medium",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"upgrade",children:"Upgrades"}),e.jsx("option",{value:"renewal",children:"Renewals"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx(g,{className:"w-4 h-4 text-gray-400"})})]})]})]})})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 via-white to-cyan-50/30 rounded-xl shadow-lg border border-blue-200/50 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-blue-100",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-600",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[220px]",children:[e.jsx(b,{className:"inline w-4 h-4 mr-2"}),"Clinic Name"]}),e.jsxs("th",{className:"px-3 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[120px]",children:[e.jsx(L,{className:"inline w-4 h-4 mr-2"}),"Type"]}),e.jsxs("th",{className:"px-3 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[120px]",children:[e.jsx(_,{className:"inline w-4 h-4 mr-2"}),"Plan"]}),e.jsxs("th",{className:"px-3 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[120px]",children:[e.jsx(j,{className:"inline w-4 h-4 mr-2"}),"Amount"]}),e.jsxs("th",{className:"px-3 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[120px]",children:[e.jsx(ie,{className:"inline w-4 h-4 mr-2"}),"Status"]}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-bold text-white uppercase tracking-wider min-w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:Q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:y===0?"No Requests Found":"No Results on This Page"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:y===0?"No subscription requests match your current filters.":"Try adjusting your filters or go to the first page."})]})]})})}):Q.map((s,r)=>e.jsxs("tr",{className:`hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-cyan-50/50 transition-all duration-300 ${r%2===0?"bg-white":"bg-blue-50/20"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shadow-sm",children:e.jsx(b,{className:"w-4 h-4 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-gray-900 truncate",children:s.clinic.name})}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:e.jsxs("span",{className:"flex-shrink-0",children:["ID:"," ",s.id]})})]})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs(u,{className:`${me[s.request_type]} border-0 px-3 py-1 text-xs font-bold flex items-center gap-1 w-fit`,children:[J(s.request_type),s.request_type.charAt(0).toUpperCase()+s.request_type.slice(1)]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Current:"," ",s.current_plan.charAt(0).toUpperCase()+s.current_plan.slice(1)]}),s.requested_plan&&e.jsxs("div",{className:"text-xs text-gray-500",children:["New:"," ",s.requested_plan.charAt(0).toUpperCase()+s.requested_plan.slice(1)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.duration_months," ","month(s)"]})]})}),e.jsx("td",{className:"px-3 py-3",children:s.calculated_amount?e.jsxs("span",{className:"font-semibold text-green-700",children:["₱",parseFloat(s.calculated_amount).toLocaleString()]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs(u,{className:`${oe[s.status]} border-0 px-2 py-1 text-xs font-bold`,children:[Y(s.status),s.status.replace("_"," ").charAt(0).toUpperCase()+s.status.replace("_"," ").slice(1)]}),s.payment_status==="pending_verification"&&e.jsx(u,{className:"bg-orange-100 text-orange-700 border-0 px-2 py-1 text-xs font-bold",children:"Payment Pending"})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(i,{onClick:()=>Ce(s),variant:"outline",size:"sm",className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white border-0 font-semibold rounded-lg px-3 py-1 text-xs flex items-center gap-1 hover:shadow-md transition-all duration-300",children:[e.jsx(Ue,{className:"h-3 w-3"}),"View"]}),s.status==="pending"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs(i,{onClick:()=>T(s,"approve"),size:"sm",className:"w-full bg-green-600 hover:bg-green-700 text-white text-xs",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Approve"]}),e.jsxs(i,{onClick:()=>T(s,"reject"),variant:"destructive",size:"sm",className:"w-full text-xs",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Reject"]})]}),s.status==="approved"&&s.payment_status==="pending_verification"&&e.jsxs(i,{onClick:()=>T(s,"verify-payment"),size:"sm",className:"w-full bg-orange-600 hover:bg-orange-700 text-white text-xs",children:[e.jsx(j,{className:"w-3 h-3 mr-1"}),"Verify Payment"]}),s.status==="approved"&&s.payment_status==="verified"&&e.jsxs(i,{onClick:()=>T(s,"complete"),size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-xs",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Complete"]})]})})]},s.id))})]})})}),h>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:U+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(H,y)})," ","of"," ",e.jsx("span",{className:"font-medium",children:y})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Show:"}),e.jsxs("select",{value:N,onChange:s=>{we(parseInt(s.target.value)),m(1)},className:"px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-700",children:"per page"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>m(1),disabled:o===1,className:"px-3 py-2 text-sm border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(g,{className:"w-4 h-4 rotate-90"}),"First"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>m(o-1),disabled:o===1,className:"px-3 py-2 text-sm border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(g,{className:"w-4 h-4 rotate-90"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:h},(s,r)=>r+1).filter(s=>s===1||s===h||s>=o-1&&s<=o+1).map((s,r,d)=>{const x=r>0&&s-d[r-1]>1;return e.jsxs(q.Fragment,{children:[x&&e.jsx("span",{className:"px-2 text-gray-500",children:"..."}),e.jsx(i,{variant:o===s?"default":"outline",size:"sm",onClick:()=>m(s),className:`px-3 py-2 text-sm min-w-[40px] ${o===s?"bg-blue-600 text-white hover:bg-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:s})]},s)})}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>m(o+1),disabled:o===h,className:"px-3 py-2 text-sm border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(g,{className:"w-4 h-4 -rotate-90"}),"Next"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>m(h),disabled:o===h,className:"px-3 py-2 text-sm border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(g,{className:"w-4 h-4 -rotate-90"}),"Last"]})]})]})]})}),e.jsx(se,{open:je,onOpenChange:P,children:e.jsxs(te,{className:"sm:max-w-md",children:[e.jsxs(ae,{children:[e.jsxs(re,{children:[l==="approve"&&"Approve Request",l==="reject"&&"Reject Request",l==="complete"&&"Complete Request",l==="verify-payment"&&"Verify Payment"]}),e.jsxs(le,{children:[l==="approve"&&"Send payment link to the clinic with fixed pricing",l==="reject"&&"Reject the request and notify the clinic",l==="complete"&&"Activate subscription after payment verification",l==="verify-payment"&&"Verify payment details and mark as verified"]})]}),e.jsxs("div",{className:"space-y-4",children:[l==="approve"&&e.jsxs("div",{children:[e.jsx(I,{children:"Payment Details"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Plan:"}),e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.request_type)==="upgrade"?((X=a==null?void 0:a.requested_plan)==null?void 0:X.charAt(0).toUpperCase())+((G=a==null?void 0:a.requested_plan)==null?void 0:G.slice(1)):((K=a==null?void 0:a.current_plan)==null?void 0:K.charAt(0).toUpperCase())+((W=a==null?void 0:a.current_plan)==null?void 0:W.slice(1))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[a==null?void 0:a.duration_months," ","month(s)"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-lg",children:["₱",(a==null?void 0:a.request_type)==="upgrade"?((a==null?void 0:a.requested_plan)==="premium"?1999:2999)*(a==null?void 0:a.duration_months):((a==null?void 0:a.current_plan)==="premium",1999*(a==null?void 0:a.duration_months))]})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fixed pricing based on plan and duration. Payment link will be sent to the clinic."})]}),l==="verify-payment"?e.jsxs("div",{children:[e.jsx(I,{htmlFor:"payment_verification_notes",children:"Payment Verification Notes"}),e.jsx(ne,{id:"payment_verification_notes",value:p.payment_verification_notes,onChange:s=>R({...p,payment_verification_notes:s.target.value}),placeholder:"Add verification notes or confirm payment details...",rows:3})]}):e.jsxs("div",{children:[e.jsx(I,{htmlFor:"admin_notes",children:"Admin Notes"}),e.jsx(ne,{id:"admin_notes",value:p.admin_notes,onChange:s=>R({...p,admin_notes:s.target.value}),placeholder:"Add any notes or instructions...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(i,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(i,{onClick:_e,disabled:F,className:l==="approve"?"bg-green-600 hover:bg-green-700":l==="reject"?"bg-red-600 hover:bg-red-700":l==="verify-payment"?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700",children:F?"Processing...":l==="approve"?"Approve":l==="reject"?"Reject":l==="verify-payment"?"Verify Payment":"Complete"})]})]})}),e.jsx(se,{open:ye,onOpenChange:M,children:e.jsxs(te,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ae,{children:[e.jsxs(re,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-white"})}),e.jsx("span",{children:"Subscription Request Details"})]}),e.jsxs(le,{children:["Detailed information for subscription request #",t==null?void 0:t.id]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Clinic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-800",children:"Clinic Name"})]}),e.jsx("p",{className:"text-gray-900",children:t.clinic.name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-800",children:"Email"})]}),e.jsx("p",{className:"text-gray-900",children:t.clinic.email})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-800 mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Request Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-800",children:"Request Type"})]}),e.jsxs(u,{className:`${me[t.request_type]} border-0 px-3 py-1`,children:[J(t.request_type),t.request_type.charAt(0).toUpperCase()+t.request_type.slice(1)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-800",children:"Current Plan"})]}),e.jsx("p",{className:"text-gray-900",children:t.current_plan.charAt(0).toUpperCase()+t.current_plan.slice(1)})]}),t.requested_plan&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-800",children:"New Plan"})]}),e.jsx("p",{className:"text-gray-900",children:t.requested_plan.charAt(0).toUpperCase()+t.requested_plan.slice(1)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ce,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-semibold text-purple-800",children:"Duration"})]}),e.jsxs("p",{className:"text-gray-900",children:[t.duration_months," ","month(s)"]})]}),t.calculated_amount&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-4 text-white col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Total Amount"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:["₱",parseFloat(t.calculated_amount).toLocaleString()]})]})]})]}),t.payment_method&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-800 mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Payment Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Payment Method"})]}),e.jsx("p",{className:"text-gray-900",children:t.payment_method.replace("_"," ").charAt(0).toUpperCase()+t.payment_method.replace("_"," ").slice(1)})]}),t.reference_number&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"System Reference Number"})]}),e.jsx("p",{className:"font-mono text-gray-900",children:t.reference_number})]}),(()=>{let s=t.payment_details,r=null;if(typeof s=="string")try{s=JSON.parse(s),r=s.user_reference_number}catch(d){console.error("Failed to parse payment details:",d)}else s&&typeof s=="object"&&(r=s.user_reference_number);return r?e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Payment Method Reference"})]}),e.jsx("p",{className:"font-mono text-gray-900",children:r})]}):null})(),((Z=t.payment_details)==null?void 0:Z.user_reference_number)&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Payment Method Reference"})]}),e.jsx("p",{className:"font-mono text-gray-900",children:t.payment_details.user_reference_number})]}),t.sender_name&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Sender Name"})]}),e.jsx("p",{className:"text-gray-900",children:t.sender_name})]}),t.sender_number&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ze,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Sender Number"})]}),e.jsx("p",{className:"text-gray-900",children:t.sender_number})]}),t.amount_sent&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Amount Sent"})]}),e.jsxs("p",{className:"text-gray-900",children:["₱",t.amount_sent.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-6 border border-amber-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-amber-800 mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Status Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800",children:"Request Status"})]}),e.jsxs(u,{className:`${oe[t.status]} border-0 px-3 py-1`,children:[Y(t.status),t.status.replace("_"," ").charAt(0).toUpperCase()+t.status.replace("_"," ").slice(1)]})]}),t.payment_status&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800",children:"Payment Status"})]}),e.jsx(u,{className:`${t.payment_status==="pending_verification"?"bg-orange-100 text-orange-700":t.payment_status==="verified"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"} border-0 px-3 py-1`,children:t.payment_status.replace("_"," ").charAt(0).toUpperCase()+t.payment_status.replace("_"," ").slice(1)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ce,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800",children:"Created Date"})]}),e.jsx("p",{className:"text-gray-900",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800",children:"Created Time"})]}),e.jsx("p",{className:"text-gray-900",children:new Date(t.created_at).toLocaleTimeString()})]})]})]}),t.admin_notes&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Admin Notes"]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:t.admin_notes})})]})]})]})})]})}export{Ls as default};
