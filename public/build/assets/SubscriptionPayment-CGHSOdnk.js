import{r as c,j as e,$ as k}from"./app-COgprWRc.js";import{C as m,a as x,b as h,c as o}from"./card-Cds0mozr.js";import{B as D}from"./button-C4x32toX.js";import{B as M}from"./badge-CEixDjMh.js";import{S as R}from"./separator-4nZQbOds.js";import{S as B}from"./SmileyDy-DL4ccB-T.js";import{B as y}from"./building-2-DowVwInN.js";import{C as E}from"./clock-BraSIhTw.js";import{C as F}from"./circle-check-big-BEuPoBvy.js";import{Z as I}from"./zap-CDqFRYPk.js";import{C as T}from"./crown-CNoFtN5r.js";import{C as f}from"./credit-card-DmhKva53.js";import{S as g}from"./smartphone-M2i-vFuy.js";import"./index-kSaTWtOi.js";import"./x-tpI0RCzt.js";import"./createLucideIcon-D0PSxBrC.js";import"./user-CKZ_iwGK.js";import"./loader-circle-BYoX5k2w.js";import"./calendar-DTUZZUoj.js";import"./map-pin-D9QiDC3_.js";import"./stethoscope-CbVKrnQ4.js";import"./info-Div9PQlp.js";import"./phone-B8PRf9xB.js";import"./send-Bx-gNjmd.js";function ie({request:r,token:j,paymentMethods:b}){const[a,N]=c.useState(""),[d,u]=c.useState(!1),[t,v]=c.useState({sender_name:"",sender_number:"",reference_number:"",amount_sent:""}),p=s=>{N(s)},l=(s,i)=>{v(n=>({...n,[s]:i}))},w=async s=>{if(s.preventDefault(),!a){alert("Please select a payment method");return}if(a==="gcash"||a==="paymaya"){if(!t.sender_name||!t.sender_number||!t.reference_number){alert("Please provide sender name, number, and reference number");return}}else if(a==="bank_transfer"&&(!t.sender_name||!t.reference_number||!t.amount_sent)){alert("Please fill in all required fields");return}u(!0);try{const n=await(await fetch(`/subscription/payment/${j}/success`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({payment_method:a,payment_details:t})})).json();if(n.success){const S=`Payment submitted successfully!

Reference Number: ${n.reference_number}

Our admin team will verify and activate your subscription within 24 hours.`;alert(S),window.location.href=n.redirect_url}else alert("Payment failed: "+n.message)}catch(i){console.error("Payment error:",i),alert("Payment processing failed. Please try again.")}finally{u(!1)}},_=s=>{switch(s){case"premium":return e.jsx(T,{className:"w-5 h-5 text-yellow-500"});case"enterprise":return e.jsx(y,{className:"w-5 h-5 text-purple-500"});default:return e.jsx(I,{className:"w-5 h-5 text-blue-500"})}},C=s=>{switch(s){case"gcash":return e.jsx(g,{className:"w-5 h-5 text-green-500"});case"paymaya":return e.jsx(g,{className:"w-5 h-5 text-blue-500"});case"bank_transfer":return e.jsx(f,{className:"w-5 h-5 text-gray-500"});default:return e.jsx(f,{className:"w-5 h-5"})}},P=s=>{switch(s){case"gcash":return"/icons/gcashqr.png";case"paymaya":return"/icons/paymayaqr.png";default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Complete Subscription Payment"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Subscription Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please complete your payment to activate your subscription"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Subscription Details"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Clinic:"}),e.jsx("span",{className:"font-medium",children:r.clinic.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Request Type:"}),e.jsx(M,{variant:r.request_type==="upgrade"?"default":"secondary",children:r.request_type==="upgrade"?"Upgrade":"Renewal"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Plan:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[_(r.request_type==="upgrade"?r.requested_plan:r.current_plan),e.jsx("span",{className:"font-medium capitalize",children:r.request_type==="upgrade"?r.requested_plan:r.current_plan})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[r.duration_months," month(s)"]})]}),e.jsx(R,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["₱",r.calculated_amount]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsx("span",{children:"Payment Deadline:"}),e.jsx("span",{children:new Date(r.payment_deadline).toLocaleDateString()})]})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Select Payment Method"})}),e.jsx(o,{children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsx("div",{className:"space-y-3",children:b.map(s=>e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${a===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>p(s.id),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"radio",name:"payment_method",value:s.id,checked:a===s.id,onChange:()=>p(s.id),className:"text-blue-600"}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(s.id),e.jsx("span",{className:"font-medium",children:s.name})]})]})},s.id))}),a&&(a==="gcash"||a==="paymaya")&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsx("img",{src:P(a),alt:`${a} QR Code`,className:"mx-auto w-48 h-48 object-contain"})}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scan the QR code with your"," ",a==="gcash"?"GCash":"PayMaya"," ","app to complete payment"]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(a==="gcash"||a==="paymaya")&&e.jsx("div",{className:"col-span-2",children:e.jsxs("p",{className:"text-sm text-blue-600 bg-blue-50 p-3 rounded-md border border-blue-200",children:[e.jsx("strong",{children:"Note:"})," ","After completing your payment via"," ",a==="gcash"?"GCash":"PayMaya",", please provide the reference number from your transaction receipt. This helps our admin team verify your payment quickly."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Name *"}),e.jsx("input",{type:"text",value:t.sender_name,onChange:s=>l("sender_name",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter sender name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sender Number *"}),e.jsx("input",{type:"text",value:t.sender_number,onChange:s=>l("sender_number",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter sender number",required:!0})]}),(a==="bank_transfer"||a==="gcash"||a==="paymaya")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference Number *"}),e.jsx("input",{type:"text",value:t.reference_number,onChange:s=>l("reference_number",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reference number",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Found in your"," ",a==="gcash"?"GCash":a==="paymaya"?"PayMaya":"bank"," ","transaction receipt"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Sent *"}),e.jsx("input",{type:"number",step:"0.01",value:t.amount_sent,onChange:s=>l("amount_sent",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount sent",required:!0})]})]})]})]}),e.jsx(D,{type:"submit",disabled:!a||d,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Complete Payment"]})})]})})]})]}),e.jsx(m,{className:"mt-8",children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Important Notes:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Payment will be verified by our admin team within 24 hours"}),e.jsx("li",{children:"• Your subscription will be activated once payment is confirmed"}),e.jsx("li",{children:"• Please keep your payment reference for verification"}),e.jsx("li",{children:"• Contact support if you encounter any issues"})]})]})})]})}),e.jsx(B,{})]})}export{ie as default};
