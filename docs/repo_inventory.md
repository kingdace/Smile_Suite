# Smile Suite Repository Inventory

**Version:** 1.0  
**Date:** 2025-01-27  
**Repository Commit:** Current HEAD  
**Generated by:** Cursor AI Assistant

## 1. Technology Stack Overview

### Backend Framework

-   **Laravel 11.x** (PHP 8.2+)
-   **PHP 8.2+** (composer.json requirement)
-   **MySQL Database** (relational database)
-   **Inertia.js** (server-side rendering bridge)

### Frontend Framework

-   **React 18.2.0** (JavaScript library)
-   **Vite 5.0** (build tool)
-   **Tailwind CSS 3.2.1** (styling framework)
-   **Shadcn/ui** (component library)
-   **Radix UI** (headless UI primitives)

### Key Dependencies

#### Backend Dependencies (composer.json)

```json
{
    "php": "^8.2",
    "laravel/framework": "^11.0",
    "inertiajs/inertia-laravel": "^2.0",
    "laravel/sanctum": "^4.0",
    "tightenco/ziggy": "^2.0",
    "doctrine/dbal": "^4.2"
}
```

#### Frontend Dependencies (package.json)

```json
{
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "@inertiajs/react": "^2.0.11",
    "@headlessui/react": "^2.2.4",
    "@radix-ui/react-*": "^1.x-2.x",
    "@fullcalendar/react": "^6.1.17",
    "recharts": "^3.1.2",
    "axios": "^1.6.4",
    "date-fns": "^4.1.0",
    "moment": "^2.30.1"
}
```

## 2. Module Architecture

### 2.1 Core Application Modules

#### Authentication & Authorization

-   **Location:** `app/Http/Controllers/Auth/`
-   **Purpose:** User authentication, registration, email verification
-   **Key Files:**
    -   `AuthenticatedSessionController.php`
    -   `ConfirmablePasswordController.php`
    -   `EmailVerificationNotificationController.php`
-   **Dependencies:** Laravel Breeze, Sanctum

#### Multi-Tenant Clinic Management

-   **Location:** `app/Http/Controllers/Clinic/`
-   **Purpose:** Core clinic operations and workflows
-   **Key Files:**
    -   `DashboardController.php` - Clinic dashboard and analytics
    -   `AppointmentController.php` - Appointment management
    -   `PatientController.php` - Patient records
    -   `TreatmentController.php` - Treatment tracking
    -   `InventoryController.php` - Inventory management
    -   `PaymentController.php` - Payment processing
    -   `ServiceController.php` - Service catalog
    -   `SupplierController.php` - Supplier management
    -   `WaitlistController.php` - Waitlist management
    -   `DentistScheduleController.php` - Schedule management

#### Administrative System

-   **Location:** `app/Http/Controllers/Admin/`
-   **Purpose:** System-wide administration and oversight
-   **Key Files:**
    -   `AdminDashboardController.php` - System dashboard
    -   `ClinicController.php` - Clinic management
    -   `ClinicRegistrationRequestController.php` - Registration approval
    -   `SubscriptionController.php` - Subscription management
    -   `UserController.php` - User management

#### Public Interface

-   **Location:** `app/Http/Controllers/Public/`
-   **Purpose:** Public-facing clinic directory and registration
-   **Key Files:**
    -   `ClinicDirectoryController.php` - Clinic listings
    -   `ClinicRegistrationController.php` - Clinic registration
    -   `PatientRegistrationController.php` - Patient registration
    -   `PaymentController.php` - Payment processing
    -   `ReviewController.php` - Review system

#### Patient Portal

-   **Location:** `app/Http/Controllers/Patient/`
-   **Purpose:** Patient self-service portal
-   **Key Files:**
    -   `PatientDashboardController.php` - Patient dashboard
    -   `PatientProfileController.php` - Profile management

### 2.2 Data Models

#### Core Entities

-   **User** (`app/Models/User.php`) - Multi-role user system
-   **Clinic** (`app/Models/Clinic.php`) - Clinic information and subscription
-   **Patient** (`app/Models/Patient.php`) - Patient records
-   **Appointment** (`app/Models/Appointment.php`) - Appointment scheduling
-   **Treatment** (`app/Models/Treatment.php`) - Treatment records
-   **Service** (`app/Models/Service.php`) - Service catalog

#### Inventory Management

-   **Inventory** (`app/Models/Inventory.php`) - Stock management
-   **InventoryItem** (`app/Models/InventoryItem.php`) - Item details
-   **InventoryTransaction** (`app/Models/InventoryTransaction.php`) - Stock movements
-   **PurchaseOrder** (`app/Models/PurchaseOrder.php`) - Purchase orders
-   **PurchaseOrderItem** (`app/Models/PurchaseOrderItem.php`) - PO line items
-   **Supplier** (`app/Models/Supplier.php`) - Supplier information

#### Scheduling & Operations

-   **DentistSchedule** (`app/Models/DentistSchedule.php`) - Schedule templates
-   **ScheduleTemplate** (`app/Models/ScheduleTemplate.php`) - Schedule patterns
-   **ScheduleException** (`app/Models/ScheduleException.php`) - Schedule exceptions
-   **Waitlist** (`app/Models/Waitlist.php`) - Waitlist management
-   **RecurringAppointment** (`app/Models/RecurringAppointment.php`) - Recurring appointments

#### Financial & Billing

-   **Payment** (`app/Models/Payment.php`) - Payment records
-   **Review** (`app/Models/Review.php`) - Patient reviews

#### Administrative

-   **ClinicRegistrationRequest** (`app/Models/ClinicRegistrationRequest.php`) - Registration requests
-   **ClinicGalleryImage** (`app/Models/ClinicGalleryImage.php`) - Clinic gallery

#### Geographic Data (PSGC)

-   **Region** (`app/Models/Region.php`) - Philippine regions
-   **Province** (`app/Models/Province.php`) - Philippine provinces
-   **CityMunicipality** (`app/Models/CityMunicipality.php`) - Cities/municipalities
-   **Barangay** (`app/Models/Barangay.php`) - Barangays

### 2.3 Service Layer

#### Business Logic Services

-   **AppointmentService** (`app/Services/AppointmentService.php`) - Appointment business logic
-   **ScheduleService** (`app/Services/ScheduleService.php`) - Schedule management
-   **PatientLinkingService** (`app/Services/PatientLinkingService.php`) - Patient record linking
-   **SubscriptionService** (`app/Services/SubscriptionService.php`) - Subscription management

### 2.4 Communication & Notifications

#### Email System

-   **Location:** `app/Mail/`
-   **Purpose:** Automated email notifications
-   **Key Files:**
    -   `AppointmentApprovedMail.php` - Appointment approval notifications
    -   `AppointmentDeniedMail.php` - Appointment denial notifications
    -   `PatientRegistrationVerificationMail.php` - Registration verification
    -   `ClinicRegistrationApproved.php` - Clinic approval notifications
    -   `PaymentConfirmed.php` - Payment confirmation
    -   `TrialSetupEmail.php` - Trial setup notifications

#### SMS Integration

-   **Status:** Referenced in code but not implemented
-   **Planned Provider:** Twilio API
-   **Usage:** Patient reminders, OTP, alerts
-   **Evidence:** Contact method options include 'sms' in forms

### 2.5 Background Processing

#### Console Commands

-   **Location:** `app/Console/Commands/`
-   **Purpose:** Scheduled tasks and maintenance
-   **Key Files:**
    -   `CheckSubscriptionExpirations.php` - Subscription monitoring
    -   `CheckPaymentExpirations.php` - Payment monitoring
    -   `TestEmail.php` - Email testing

### 2.6 Middleware & Security

#### Custom Middleware

-   **CheckSubscriptionStatus** (`app/Http/Middleware/CheckSubscriptionStatus.php`) - Subscription validation
-   **HandleInertiaRequests** (`app/Http/Middleware/HandleInertiaRequests.php`) - Inertia.js integration
-   **RedirectIfAuthenticated** (`app/Http/Middleware/RedirectIfAuthenticated.php`) - Auth redirects

#### Policies

-   **Location:** `app/Policies/`
-   **Purpose:** Authorization policies
-   **Files:** Appointment, Inventory, Patient, Payment, Service, Supplier, Treatment, Waitlist policies

### 2.7 Frontend Architecture

#### Page Components

-   **Location:** `resources/js/Pages/`
-   **Structure:**
    -   `Admin/` - Administrative interfaces
    -   `Clinic/` - Clinic management interfaces
    -   `Patient/` - Patient portal interfaces
    -   `Public/` - Public-facing pages
    -   `Auth/` - Authentication pages

#### UI Components

-   **Location:** `resources/js/Components/`
-   **Framework:** Shadcn/ui + Radix UI
-   **Key Components:**
    -   `ui/` - Reusable UI components
    -   `Appointment/` - Appointment-specific components
    -   `ClinicLogo.jsx` - Clinic branding
    -   `ApplicationLogo.jsx` - Application branding

### 2.8 Database Schema

#### Migration Files

-   **Location:** `database/migrations/`
-   **Total:** 50+ migration files
-   **Key Migrations:**
    -   User management and roles
    -   Clinic and multi-tenancy setup
    -   Appointment and scheduling system
    -   Inventory and purchase order system
    -   Payment and subscription system
    -   Geographic data (PSGC)

#### Seeders

-   **Location:** `database/seeders/`
-   **Purpose:** Initial data population
-   **Files:** DatabaseSeeder, AppointmentStatusSeeder, AppointmentTypeSeeder

### 2.9 Configuration

#### Application Config

-   **Mail Configuration** (`config/mail.php`) - Email service setup
-   **Database Configuration** (`config/database.php`) - Database connections
-   **App Configuration** (`config/app.php`) - Core application settings

#### Environment Variables

-   **Mail Settings:** SMTP configuration
-   **Database:** MySQL connection details
-   **Application:** App name, URL, timezone
-   **Payment:** Stripe integration (planned)

### 2.10 Testing

#### Test Structure

-   **Location:** `tests/`
-   **Framework:** PHPUnit
-   **Coverage:** Feature and Unit tests
-   **Structure:**
    -   `Feature/Auth/` - Authentication tests
    -   `Feature/` - Feature tests
    -   `Unit/` - Unit tests

### 2.11 Build & Deployment

#### Build Tools

-   **Vite** - Frontend asset compilation
-   **Laravel Mix** - Asset management
-   **Tailwind CSS** - CSS processing

#### Development Tools

-   **Laravel Pint** - Code formatting
-   **Laravel Sail** - Docker development environment
-   **PHPUnit** - Testing framework

## 3. Integration Points

### 3.1 External Services

#### Payment Processing

-   **Stripe Integration** - Planned but not fully implemented
-   **Evidence:** Stripe fields in models and migrations
-   **Status:** Basic structure in place

#### Geographic Data

-   **PSGC API** - Philippine Standard Geographic Code
-   **Controller:** `PsgcApiController.php`
-   **Usage:** Address validation and selection

#### Email Services

-   **SMTP Configuration** - Configurable email providers
-   **Templates:** Blade templates for email notifications

### 3.2 Internal Integrations

#### Multi-Tenancy

-   **Clinic Isolation** - Data separation by clinic_id
-   **User Roles** - Role-based access control
-   **Subscription Management** - Per-clinic subscription tracking

#### Real-time Features

-   **Calendar Integration** - FullCalendar.js for scheduling
-   **Dashboard Analytics** - Recharts for data visualization
-   **QR Code Generation** - QR code for patient records

## 4. Security Features

### 4.1 Authentication

-   **Laravel Sanctum** - API token authentication
-   **Email Verification** - User email verification
-   **Password Policies** - Secure password requirements

### 4.2 Authorization

-   **Role-Based Access Control** - User roles and permissions
-   **Policy-Based Authorization** - Model-specific policies
-   **Middleware Protection** - Route-level security

### 4.3 Data Protection

-   **Soft Deletes** - Data retention and recovery
-   **Input Validation** - Request validation and sanitization
-   **SQL Injection Protection** - Eloquent ORM protection

## 5. Performance Optimizations

### 5.1 Database

-   **Indexing** - Strategic database indexes
-   **Eager Loading** - Relationship optimization
-   **Query Optimization** - Efficient database queries

### 5.2 Frontend

-   **Code Splitting** - Vite-based optimization
-   **Lazy Loading** - Component-level optimization
-   **Caching** - Browser and server-side caching

## 6. Monitoring & Logging

### 6.1 Application Logging

-   **Laravel Logging** - Built-in logging system
-   **Error Tracking** - Exception handling
-   **Activity Monitoring** - User activity tracking

### 6.2 Health Checks

-   **Subscription Monitoring** - Automated subscription checks
-   **Payment Monitoring** - Payment status tracking
-   **Email Testing** - Communication verification

## 7. Deployment Considerations

### 7.1 Environment Requirements

-   **PHP 8.2+** - Backend runtime
-   **MySQL 8.0+** - Database server
-   **Node.js 18+** - Frontend build tools
-   **Web Server** - Apache/Nginx configuration

### 7.2 Cloud Deployment

-   **Multi-Tenant Architecture** - Scalable design
-   **Database Isolation** - Per-clinic data separation
-   **Resource Scaling** - Horizontal scaling capability

## 8. Missing Implementations

### 8.1 SMS Integration

-   **Status:** Referenced but not implemented
-   **Provider:** Twilio API planned
-   **Features:** Patient reminders, OTP, alerts

### 8.2 Payment Gateway

-   **Status:** Basic Stripe structure in place
-   **Implementation:** Requires full Stripe SDK integration
-   **Features:** Online payments, subscription billing

### 8.3 Mobile Application

-   **Status:** Web-only implementation
-   **Future:** Native mobile apps planned
-   **Current:** Responsive web design

## 9. Development Workflow

### 9.1 Version Control

-   **Git** - Source code management
-   **Branching Strategy** - Feature-based development
-   **Code Review** - Pull request workflow

### 9.2 Development Environment

-   **Local Setup** - WampServer/XAMPP
-   **Docker Support** - Laravel Sail
-   **Hot Reloading** - Vite development server

### 9.3 Code Quality

-   **Linting** - Laravel Pint
-   **Testing** - PHPUnit test suite
-   **Documentation** - Inline code documentation

---

**Note:** This inventory represents the current state of the repository as of the generation date. The system is actively developed and may have additional features or modifications beyond what is documented here.
